parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"or4r":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3],e="Expected a function",n=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,f=/^0o[0-7]+$/i,c=parseInt,a="object"==typeof t&&t&&t.Object===Object&&t,s="object"==typeof self&&self&&self.Object===Object&&self,v=a||s||Function("return this")(),l=Object.prototype,p=l.toString,b=Math.max,m=Math.min,y=function(){return v.Date.now()};function d(t,n,r){var i,o,u,f,c,a,s=0,v=!1,l=!1,p=!0;if("function"!=typeof t)throw new TypeError(e);function d(e){var n=i,r=o;return i=o=void 0,s=e,f=t.apply(r,n)}function g(t){var e=t-a;return void 0===a||e>=n||e<0||l&&t-s>=u}function O(){var t=y();if(g(t))return x(t);c=setTimeout(O,function(t){var e=n-(t-a);return l?m(e,u-(t-s)):e}(t))}function x(t){return c=void 0,p&&i?d(t):(i=o=void 0,f)}function T(){var t=y(),e=g(t);if(i=arguments,o=this,a=t,e){if(void 0===c)return function(t){return s=t,c=setTimeout(O,n),v?d(t):f}(a);if(l)return c=setTimeout(O,n),d(a)}return void 0===c&&(c=setTimeout(O,n)),f}return n=h(n)||0,j(r)&&(v=!!r.leading,u=(l="maxWait"in r)?b(h(r.maxWait)||0,n):u,p="trailing"in r?!!r.trailing:p),T.cancel=function(){void 0!==c&&clearTimeout(c),s=0,i=a=o=c=void 0},T.flush=function(){return void 0===c?f:x(y())},T}function j(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function g(t){return!!t&&"object"==typeof t}function O(t){return"symbol"==typeof t||g(t)&&p.call(t)==r}function h(t){if("number"==typeof t)return t;if(O(t))return n;if(j(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=j(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||f.test(t)?c(t.slice(2),r?2:8):o.test(t)?n:+t}module.exports=d;
},{}],"WEtf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return r.android()||r.blackberry()||r.ios()||r.opera()||r.windows()}},e=r;exports.default=e;
},{}],"hZBy":[function(require,module,exports) {
"use strict";function e(e){return r(e)||n(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function o(e){return document.querySelector(e)}function s(t){return e((arguments.length>1&&void 0!==arguments[1]?arguments[1]:document).querySelectorAll(t))}function c(t,n){return e(t.querySelectorAll(n))}function a(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)".concat(t.split(" ").join("|"),"(\\b|$)"),"gi")," ")}function l(e,t){e.classList?e.classList.add(t):e.className="".concat(e.className," ").concat(t)}function i(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )".concat(t,"( |$)"),"gi").test(e.className)}function u(e,t){t=t||0;var n=e.getBoundingClientRect().top+t,r=(window.pageYOffset||document.documentElement.scrollTop)+n;window.scrollTo(0,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.select=o,exports.selectAll=s,exports.find=c,exports.removeClass=a,exports.addClass=l,exports.hasClass=i,exports.jumpTo=u;
},{}],"U9xJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("./dom");function t(){(0,e.selectAll)("[target='_blank']").forEach(function(e){return e.setAttribute("rel","noopener")})}
},{"./dom":"hZBy"}],"HZvp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={testing:"This is localhost testing data",city:"Lee",country:"US",hostname:"cpe-74-76-154-164.nycap.res.rr.com",ip:"74.76.154.164",loc:"42.3043,-73.2482",org:"AS11351 Charter Communications Inc",postal:"01238",region:"Massachusetts",timezone:"America/New_York"};exports.default=e;
},{}],"NSOq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./locate-test"));function t(e){return e&&e.__esModule?e:{default:e}}var n=4e3;function o(){if(window.location.href.includes("localhost"))return Promise.resolve(e.default);return new Promise(function(e,t){fetch("https://ipinfo.io?token=6f0f9c88db028a").then(function(n){n.ok?n.json().then(e).catch(t):t(new Error(n.status))})})}function r(){return new Promise(function(e,t){var r=setTimeout(function(){return t(new Error("timeout"))},n);o().then(function(t){clearTimeout(r),e(t)}).catch(t)})}var u=r;exports.default=u;
},{"./locate-test":"HZvp"}],"tqbV":[function(require,module,exports) {
"use strict";function e(e){return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"KT2P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./identity"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(null==r)return e.default;var t,n,u=r.scale[0],a=r.scale[1],l=r.translate[0],s=r.translate[1];return function(e,r){r||(t=n=0);var f=2,i=e.length,o=new Array(i);for(o[0]=(t+=e[0])*u+l,o[1]=(n+=e[1])*a+s;f<i;)o[f]=e[f],++f;return o}}
},{"./identity":"tqbV"}],"ZgyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./transform"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t){var r,o=(0,e.default)(t.transform),n=1/0,a=n,c=-n,s=-n;function i(e){(e=o(e))[0]<n&&(n=e[0]),e[0]>c&&(c=e[0]),e[1]<a&&(a=e[1]),e[1]>s&&(s=e[1])}function f(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(f);break;case"Point":i(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(i)}}for(r in t.arcs.forEach(function(e){for(var t,r=-1,i=e.length;++r<i;)(t=o(e[r],r))[0]<n&&(n=t[0]),t[0]>c&&(c=t[0]),t[1]<a&&(a=t[1]),t[1]>s&&(s=t[1])}),t.objects)f(t.objects[r]);return[n,a,c,s]}
},{"./transform":"KT2P"}],"bHWq":[function(require,module,exports) {
"use strict";function e(e,t){for(var r,o=e.length,s=o-t;s<--o;)r=e[s],e[s++]=e[o],e[o]=r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"OAzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.feature=o,exports.object=u;var e=t(require("./reverse")),r=t(require("./transform"));function t(e){return e&&e.__esModule?e:{default:e}}function n(e,r){return"GeometryCollection"===r.type?{type:"FeatureCollection",features:r.geometries.map(function(r){return o(e,r)})}:o(e,r)}function o(e,r){var t=r.id,n=r.bbox,o=null==r.properties?{}:r.properties,a=u(e,r);return null==t&&null==n?{type:"Feature",properties:o,geometry:a}:null==n?{type:"Feature",id:t,properties:o,geometry:a}:{type:"Feature",id:t,bbox:n,properties:o,geometry:a}}function u(t,n){var o=(0,r.default)(t.transform),u=t.arcs;function a(r,t){t.length&&t.pop();for(var n=u[r<0?~r:r],a=0,i=n.length;a<i;++a)t.push(o(n[a],a));r<0&&(0,e.default)(t,i)}function i(e){return o(e)}function s(e){for(var r=[],t=0,n=e.length;t<n;++t)a(e[t],r);return r.length<2&&r.push(r[0]),r}function l(e){for(var r=s(e);r.length<4;)r.push(r[0]);return r}function p(e){return e.map(l)}return function e(r){var t,n=r.type;switch(n){case"GeometryCollection":return{type:n,geometries:r.geometries.map(e)};case"Point":t=i(r.coordinates);break;case"MultiPoint":t=r.coordinates.map(i);break;case"LineString":t=s(r.arcs);break;case"MultiLineString":t=r.arcs.map(s);break;case"Polygon":t=p(r.arcs);break;case"MultiPolygon":t=r.arcs.map(p);break;default:return null}return{type:n,coordinates:t}}(n)}
},{"./reverse":"bHWq","./transform":"KT2P"}],"Q7FN":[function(require,module,exports) {
"use strict";function e(e,t){var r={},n={},a={},s=[],f=-1;function c(e,t){for(var n in e){var a=e[n];delete t[a.start],delete a.start,delete a.end,a.forEach(function(e){r[e<0?~e:e]=1}),s.push(a)}}return t.forEach(function(r,n){var a,s=e.arcs[r<0?~r:r];s.length<3&&!s[1][0]&&!s[1][1]&&(a=t[++f],t[f]=r,t[n]=a)}),t.forEach(function(t){var r,s,f=function(t){var r,n=e.arcs[t<0?~t:t],a=n[0];e.transform?(r=[0,0],n.forEach(function(e){r[0]+=e[0],r[1]+=e[1]})):r=n[n.length-1];return t<0?[r,a]:[a,r]}(t),c=f[0],d=f[1];if(r=a[c])if(delete a[r.end],r.push(t),r.end=d,s=n[d]){delete n[s.start];var o=s===r?r:r.concat(s);n[o.start=r.start]=a[o.end=s.end]=o}else n[r.start]=a[r.end]=r;else if(r=n[d])if(delete n[r.start],r.unshift(t),r.start=c,s=a[c]){delete a[s.end];var u=s===r?r:s.concat(r);n[u.start=s.start]=a[u.end=r.end]=u}else n[r.start]=a[r.end]=r;else n[(r=[t]).start=c]=a[r.end=d]=r}),c(a,n),c(n,a),t.forEach(function(e){r[e<0?~e:e]||s.push([e])}),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"PXw2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.meshArcs=c;var e=require("./feature"),r=t(require("./stitch"));function t(e){return e&&e.__esModule?e:{default:e}}function n(r){return(0,e.object)(r,c.apply(this,arguments))}function c(e,t,n){var c,o,u;if(arguments.length>1)c=i(e,t,n);else for(o=0,c=new Array(u=e.arcs.length);o<u;++o)c[o]=o;return{type:"MultiLineString",arcs:(0,r.default)(e,c)}}function i(e,r,t){var n,c=[],i=[];function o(e){var r=e<0?~e:e;(i[r]||(i[r]=[])).push({i:e,g:n})}function u(e){e.forEach(o)}function a(e){e.forEach(u)}return function e(r){switch(n=r,r.type){case"GeometryCollection":r.geometries.forEach(e);break;case"LineString":u(r.arcs);break;case"MultiLineString":case"Polygon":a(r.arcs);break;case"MultiPolygon":r.arcs.forEach(a)}}(r),i.forEach(null==t?function(e){c.push(e[0].i)}:function(e){t(e[0].g,e[e.length-1].g)&&c.push(e[0].i)}),c}
},{"./feature":"OAzg","./stitch":"Q7FN"}],"GEqj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n,exports.mergeArcs=c;var o=require("./feature"),r=t(require("./stitch"));function t(o){return o&&o.__esModule?o:{default:o}}function e(o){for(var r,t=-1,e=o.length,n=o[e-1],c=0;++t<e;)r=n,n=o[t],c+=r[0]*n[1]-r[1]*n[0];return Math.abs(c)}function n(r){return(0,o.object)(r,c.apply(this,arguments))}function c(t,n){var c={},u=[],f=[];function a(o){o.forEach(function(r){r.forEach(function(r){(c[r=r<0?~r:r]||(c[r]=[])).push(o)})}),u.push(o)}function i(r){return e((0,o.object)(t,{type:"Polygon",arcs:[r]}).coordinates[0])}return n.forEach(function o(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(o);break;case"Polygon":a(r.arcs);break;case"MultiPolygon":r.arcs.forEach(a)}}),u.forEach(function(o){if(!o._){var r=[],t=[o];for(o._=1,f.push(r);o=t.pop();)r.push(o),o.forEach(function(o){o.forEach(function(o){c[o<0?~o:o].forEach(function(o){o._||(o._=1,t.push(o))})})})}}),u.forEach(function(o){delete o._}),{type:"MultiPolygon",arcs:f.map(function(o){var e,n=[];if(o.forEach(function(o){o.forEach(function(o){o.forEach(function(o){c[o<0?~o:o].length<2&&n.push(o)})})}),(e=(n=(0,r.default)(t,n)).length)>1)for(var u,f,a=1,s=i(n[0]);a<e;++a)(u=i(n[a]))>s&&(f=n[0],n[0]=n[a],n[a]=f,s=u);return n})}}
},{"./feature":"OAzg","./stitch":"Q7FN"}],"ogBt":[function(require,module,exports) {
"use strict";function e(e,r){for(var t=0,o=e.length;t<o;){var u=t+o>>>1;e[u]<r?t=u+1:o=u}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"IE0s":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=n(require("./bisect"));function n(e){return e&&e.__esModule?e:{default:e}}function t(n){var t={},r=n.map(function(){return[]});function o(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,n){e.forEach(function(e){o(e,n)})}var u={LineString:o,MultiLineString:i,Polygon:i,MultiPolygon:function(e,n){e.forEach(function(e){i(e,n)})}};for(var f in n.forEach(function e(n,t){"GeometryCollection"===n.type?n.geometries.forEach(function(n){e(n,t)}):n.type in u&&u[n.type](n.arcs,t)}),t)for(var c=t[f],a=c.length,l=0;l<a;++l)for(var s=l+1;s<a;++s){var p,v=c[l],d=c[s];(p=r[v])[f=(0,e.default)(p,d)]!==d&&p.splice(f,0,d),(p=r[d])[f=(0,e.default)(p,v)]!==v&&p.splice(f,0,v)}return r}
},{"./bisect":"ogBt"}],"UcEB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./identity"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){if(null==r)return e.default;var t,n,u=r.scale[0],a=r.scale[1],l=r.translate[0],o=r.translate[1];return function(e,r){r||(t=n=0);var s=2,d=e.length,f=new Array(d),i=Math.round((e[0]-l)/u),c=Math.round((e[1]-o)/a);for(f[0]=i-t,t=i,f[1]=c-n,n=c;s<d;)f[s]=e[s],++s;return f}}
},{"./identity":"tqbV"}],"hBDS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=t(require("./bbox")),r=t(require("./untransform"));function t(e){return e&&e.__esModule?e:{default:e}}function o(t,o){if(t.transform)throw new Error("already quantized");if(o&&o.scale)l=t.bbox;else{if(!((n=Math.floor(o))>=2))throw new Error("n must be â‰¥2");var n,a=(l=t.bbox||(0,e.default)(t))[0],i=l[1],s=l[2],u=l[3];o={scale:[s-a?(s-a)/(n-1):1,u-i?(u-i)/(n-1):1],translate:[a,i]}}var l,c,b=(0,r.default)(o),f=t.objects,p={};function d(e){return b(e)}function m(e){var r;switch(e.type){case"GeometryCollection":r={type:"GeometryCollection",geometries:e.geometries.map(m)};break;case"Point":r={type:"Point",coordinates:d(e.coordinates)};break;case"MultiPoint":r={type:"MultiPoint",coordinates:e.coordinates.map(d)};break;default:return e}return null!=e.id&&(r.id=e.id),null!=e.bbox&&(r.bbox=e.bbox),null!=e.properties&&(r.properties=e.properties),r}for(c in f)p[c]=m(f[c]);return{type:"Topology",bbox:l,transform:o,objects:p,arcs:t.arcs.map(function(e){var r,t=0,o=1,n=e.length,a=new Array(n);for(a[0]=b(e[0],0);++t<n;)((r=b(e[t],t))[0]||r[1])&&(a[o++]=r);return 1===o&&(a[o++]=[0,0]),a.length=o,a})}}
},{"./bbox":"ZgyP","./untransform":"UcEB"}],"ZeSf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"bbox",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"feature",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"mesh",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"meshArcs",{enumerable:!0,get:function(){return t.meshArcs}}),Object.defineProperty(exports,"merge",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"mergeArcs",{enumerable:!0,get:function(){return n.mergeArcs}}),Object.defineProperty(exports,"neighbors",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"quantize",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"transform",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"untransform",{enumerable:!0,get:function(){return i.default}});var e=a(require("./src/bbox")),r=a(require("./src/feature")),t=s(require("./src/mesh")),n=s(require("./src/merge")),u=a(require("./src/neighbors")),o=a(require("./src/quantize")),f=a(require("./src/transform")),i=a(require("./src/untransform"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function s(e){if(e&&e.__esModule)return e;var r=c();if(r&&r.has(e))return r.get(e);var t={};if(null!=e){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var o=n?Object.getOwnPropertyDescriptor(e,u):null;o&&(o.get||o.set)?Object.defineProperty(t,u,o):t[u]=e[u]}}return t.default=e,r&&r.set(e,t),t}function a(e){return e&&e.__esModule?e:{default:e}}
},{"./src/bbox":"ZgyP","./src/feature":"OAzg","./src/mesh":"PXw2","./src/merge":"GEqj","./src/neighbors":"IE0s","./src/quantize":"hBDS","./src/transform":"KT2P","./src/untransform":"UcEB"}],"wOZf":[function(require,module,exports) {
"use strict";function n(n){var o=1/0,t=1/0,r=-1/0,i=-1/0;function c(n){null!=n&&e.hasOwnProperty(n.type)&&e[n.type](n)}var e={GeometryCollection:function(n){n.geometries.forEach(c)},Point:function(n){f(n.coordinates)},MultiPoint:function(n){n.coordinates.forEach(f)},LineString:function(n){u(n.arcs)},MultiLineString:function(n){n.arcs.forEach(u)},Polygon:function(n){n.arcs.forEach(u)},MultiPolygon:function(n){n.arcs.forEach(a)}};function f(n){var c=n[0],e=n[1];c<o&&(o=c),c>r&&(r=c),e<t&&(t=e),e>i&&(i=e)}function u(n){n.forEach(f)}function a(n){n.forEach(u)}for(var s in n)c(n[s]);return r>=o&&i>=t?[o,t,r,i]:void 0}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"LEHr":[function(require,module,exports) {
"use strict";function r(r,e,t,n,a){3===arguments.length&&(n=Array,a=null);for(var u=new n(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),f=r-1,o=0;o<r;++o)u[o]=a;return{add:function(n){for(var o=e(n)&f,l=u[o],h=0;l!=a;){if(t(l,n))return!0;if(++h>=r)throw new Error("full hashset");l=u[o=o+1&f]}return u[o]=n,!0},has:function(n){for(var o=e(n)&f,l=u[o],h=0;l!=a;){if(t(l,n))return!0;if(++h>=r)break;l=u[o=o+1&f]}return!1},values:function(){for(var r=[],e=0,t=u.length;e<t;++e){var n=u[e];n!=a&&r.push(n)}return r}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"NZrI":[function(require,module,exports) {
"use strict";function r(r,e,t,n,u,a){3===arguments.length&&(n=a=Array,u=null);for(var f=new n(r=1<<Math.max(4,Math.ceil(Math.log(r)/Math.LN2))),o=new a(r),i=r-1,h=0;h<r;++h)f[h]=u;return{set:function(n,a){for(var h=e(n)&i,l=f[h],s=0;l!=u;){if(t(l,n))return o[h]=a;if(++s>=r)throw new Error("full hashmap");l=f[h=h+1&i]}return f[h]=n,o[h]=a,a},maybeSet:function(n,a){for(var h=e(n)&i,l=f[h],s=0;l!=u;){if(t(l,n))return o[h];if(++s>=r)throw new Error("full hashmap");l=f[h=h+1&i]}return f[h]=n,o[h]=a,a},get:function(n,a){for(var h=e(n)&i,l=f[h],s=0;l!=u;){if(t(l,n))return o[h];if(++s>=r)break;l=f[h=h+1&i]}return a},keys:function(){for(var r=[],e=0,t=f.length;e<t;++e){var n=f[e];n!=u&&r.push(n)}return r}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"HghJ":[function(require,module,exports) {
"use strict";function e(e,t){return e[0]===t[0]&&e[1]===t[1]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"A6ov":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=a;var e=new ArrayBuffer(16),r=new Float64Array(e),t=new Uint32Array(e);function a(e){r[0]=e[0],r[1]=e[1];var a=t[0]^t[1];return 2147483647&(a=a<<5^a>>7^t[2]^t[3])}
},{}],"dSAC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=a(require("./hash/hashset")),r=a(require("./hash/hashmap")),t=a(require("./hash/point-equal")),n=a(require("./hash/point-hash"));function a(e){return e&&e.__esModule?e:{default:e}}function u(a){var u,l,h,f,o=a.coordinates,i=a.lines,s=a.rings,d=function(){for(var e=(0,r.default)(1.4*o.length,x,M,Int32Array,-1,Int32Array),t=new Int32Array(o.length),n=0,a=o.length;n<a;++n)t[n]=e.maybeSet(n,n);return t}(),g=new Int32Array(o.length),c=new Int32Array(o.length),v=new Int32Array(o.length),y=new Int8Array(o.length),A=0;for(u=0,l=o.length;u<l;++u)g[u]=c[u]=v[u]=-1;for(u=0,l=i.length;u<l;++u){var I=i[u],p=I[0],q=I[1];for(h=d[p],f=d[++p],++A,y[h]=1;++p<=q;)m(u,h,h=f,f=d[p]);++A,y[f]=1}for(u=0,l=o.length;u<l;++u)g[u]=-1;for(u=0,l=s.length;u<l;++u){var w=s[u],_=w[0]+1,b=w[1];for(m(u,d[b-1],h=d[_-1],f=d[_]);++_<=b;)m(u,h,h=f,f=d[_])}function m(e,r,t,n){if(g[t]!==e){g[t]=e;var a=c[t];if(a>=0){var u=v[t];a===r&&u===n||a===n&&u===r||(++A,y[t]=1)}else c[t]=r,v[t]=n}}function x(e){return(0,n.default)(o[e])}function M(e,r){return(0,t.default)(o[e],o[r])}g=c=v=null;var j,O=(0,e.default)(1.4*A,n.default,t.default);for(u=0,l=o.length;u<l;++u)y[j=d[u]]&&O.add(o[j]);return O}
},{"./hash/hashset":"LEHr","./hash/hashmap":"NZrI","./hash/point-equal":"HghJ","./hash/point-hash":"A6ov"}],"ubT2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=r(require("./join"));function r(e){return e&&e.__esModule?e:{default:e}}function t(r){var t,o,u,a=(0,e.default)(r),f=r.coordinates,s=r.lines,i=r.rings;for(o=0,u=s.length;o<u;++o)for(var l=s[o],c=l[0],d=l[1];++c<d;)a.has(f[c])&&(t={0:c,1:l[1]},l[1]=c,l=l.next=t);for(o=0,u=i.length;o<u;++o)for(var v=i[o],h=v[0],x=h,_=v[1],g=a.has(f[h]);++x<_;)a.has(f[x])&&(g?(t={0:x,1:v[1]},v[1]=x,v=v.next=t):(n(f,h,_,_-x),f[_]=f[h],g=!0,x=h));return r}function n(e,r,t,n){o(e,r,t),o(e,r,r+n),o(e,r+n,t)}function o(e,r,t){for(var n,o=r+(t---r>>1);r<o;++r,--t)n=e[r],e[r]=e[t],e[t]=n}
},{"./join":"dSAC"}],"gQuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=f;var r=n(require("./hash/hashmap")),e=n(require("./hash/point-equal")),t=n(require("./hash/point-hash"));function n(r){return r&&r.__esModule?r:{default:r}}function f(n){var f,u,i,o,a=n.coordinates,l=n.lines,h=n.rings,s=l.length+h.length;for(delete n.lines,delete n.rings,i=0,o=l.length;i<o;++i)for(f=l[i];f=f.next;)++s;for(i=0,o=h.length;i<o;++i)for(u=h[i];u=u.next;)++s;var d=(0,r.default)(2*s*1.4,t.default,e.default),v=n.arcs=[];for(i=0,o=l.length;i<o;++i){f=l[i];do{g(f)}while(f=f.next)}for(i=0,o=h.length;i<o;++i)if((u=h[i]).next)do{g(u)}while(u=u.next);else c(u);function g(r){var e,t,n,f,u,i,o,l;if(n=d.get(e=a[r[0]]))for(o=0,l=n.length;o<l;++o)if(p(f=n[o],r))return r[0]=f[0],void(r[1]=f[1]);if(u=d.get(t=a[r[1]]))for(o=0,l=u.length;o<l;++o)if(x(i=u[o],r))return r[1]=i[0],void(r[0]=i[1]);n?n.push(r):d.set(e,[r]),u?u.push(r):d.set(t,[r]),v.push(r)}function c(r){var e,t,n,f,u;if(t=d.get(a[r[0]]))for(f=0,u=t.length;f<u;++f){if(q(n=t[f],r))return r[0]=n[0],void(r[1]=n[1]);if(_(n,r))return r[0]=n[1],void(r[1]=n[0])}if(t=d.get(e=a[r[0]+w(r)]))for(f=0,u=t.length;f<u;++f){if(q(n=t[f],r))return r[0]=n[0],void(r[1]=n[1]);if(_(n,r))return r[0]=n[1],void(r[1]=n[0])}t?t.push(r):d.set(e,[r]),v.push(r)}function p(r,t){var n=r[0],f=t[0],u=r[1];if(n-u!=f-t[1])return!1;for(;n<=u;++n,++f)if(!(0,e.default)(a[n],a[f]))return!1;return!0}function x(r,t){var n=r[0],f=t[0],u=r[1],i=t[1];if(n-u!=f-i)return!1;for(;n<=u;++n,--i)if(!(0,e.default)(a[n],a[i]))return!1;return!0}function q(r,t){var n=r[0],f=t[0],u=r[1]-n;if(u!==t[1]-f)return!1;for(var i=w(r),o=w(t),l=0;l<u;++l)if(!(0,e.default)(a[n+(l+i)%u],a[f+(l+o)%u]))return!1;return!0}function _(r,t){var n=r[0],f=t[0],u=r[1],i=t[1],o=u-n;if(o!==i-f)return!1;for(var l=w(r),h=o-w(t),s=0;s<o;++s)if(!(0,e.default)(a[n+(s+l)%o],a[i-(s+h)%o]))return!1;return!0}function w(r){for(var e=r[0],t=r[1],n=e,f=n,u=a[n];++n<t;){var i=a[n];(i[0]<u[0]||i[0]===u[0]&&i[1]<u[1])&&(f=n,u=i)}return f-e}return n}
},{"./hash/hashmap":"NZrI","./hash/point-equal":"HghJ","./hash/point-hash":"A6ov"}],"vdug":[function(require,module,exports) {
"use strict";function e(e){for(var t=-1,r=e.length;++t<r;){for(var n,o,l=e[t],u=0,f=1,s=l.length,a=l[0],c=a[0],d=a[1];++u<s;)n=(a=l[u])[0],o=a[1],n===c&&o===d||(l[f++]=[n-c,o-d],c=n,d=o);1===f&&(l[f++]=[0,0]),l.length=f}return e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"BS3s":[function(require,module,exports) {
"use strict";function r(r){var n=-1,t=[],o=[],e=[];function a(r){r&&c.hasOwnProperty(r.type)&&c[r.type](r)}var c={GeometryCollection:function(r){r.geometries.forEach(a)},LineString:function(r){r.arcs=i(r.arcs)},MultiLineString:function(r){r.arcs=r.arcs.map(i)},Polygon:function(r){r.arcs=r.arcs.map(u)},MultiPolygon:function(r){r.arcs=r.arcs.map(s)}};function i(r){for(var o=0,a=r.length;o<a;++o)e[++n]=r[o];var c={0:n-a+1,1:n};return t.push(c),c}function u(r){for(var t=0,a=r.length;t<a;++t)e[++n]=r[t];var c={0:n-a+1,1:n};return o.push(c),c}function s(r){return r.map(u)}for(var f in r)a(r[f]);return{type:"Topology",coordinates:e,lines:t,rings:o,objects:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"k2Ou":[function(require,module,exports) {
"use strict";function e(e){var o,r={};for(o in e)r[o]=t(e[o]);return r}function t(e){return null==e?{type:null}:("FeatureCollection"===e.type?o:"Feature"===e.type?r:n)(e)}function o(e){var t={type:"GeometryCollection",geometries:e.features.map(r)};return null!=e.bbox&&(t.bbox=e.bbox),t}function r(e){var t,o=n(e.geometry);for(t in null!=e.id&&(o.id=e.id),null!=e.bbox&&(o.bbox=e.bbox),e.properties){o.properties=e.properties;break}return o}function n(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(n)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"b3nw":[function(require,module,exports) {
"use strict";function n(n,t,r){var o=t[0],e=t[1],u=t[2],a=t[3],i=u-o?(r-1)/(u-o):1,c=a-e?(r-1)/(a-e):1;function s(n){return[Math.round((n[0]-o)*i),Math.round((n[1]-e)*c)]}function f(n,t){for(var r,u,a,s,f,l=-1,d=0,p=n.length,h=new Array(p);++l<p;)r=n[l],s=Math.round((r[0]-o)*i),f=Math.round((r[1]-e)*c),s===u&&f===a||(h[d++]=[u=s,a=f]);for(h.length=d;d<t;)d=h.push([h[0][0],h[0][1]]);return h}function l(n){return f(n,2)}function d(n){return f(n,4)}function p(n){return n.map(d)}function h(n){null!=n&&y.hasOwnProperty(n.type)&&y[n.type](n)}var y={GeometryCollection:function(n){n.geometries.forEach(h)},Point:function(n){n.coordinates=s(n.coordinates)},MultiPoint:function(n){n.coordinates=n.coordinates.map(s)},LineString:function(n){n.arcs=l(n.arcs)},MultiLineString:function(n){n.arcs=n.arcs.map(l)},Polygon:function(n){n.arcs=p(n.arcs)},MultiPolygon:function(n){n.arcs=n.arcs.map(p)}};for(var M in n)h(n[M]);return{scale:[1/i,1/c],translate:[o,e]}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=n;
},{}],"vbkJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=s;var e=c(require("./bounds")),r=c(require("./cut")),t=c(require("./dedup")),n=c(require("./delta")),u=c(require("./extract")),a=c(require("./geometry")),o=c(require("./hash/hashmap")),i=c(require("./prequantize"));function c(e){return e&&e.__esModule?e:{default:e}}function s(c,s){var d=(0,e.default)(c=(0,a.default)(c)),p=s>0&&d&&(0,i.default)(c,d,s),m=(0,t.default)((0,r.default)((0,u.default)(c))),h=m.coordinates,q=(0,o.default)(1.4*m.arcs.length,f,l);function v(e){e&&g.hasOwnProperty(e.type)&&g[e.type](e)}c=m.objects,m.bbox=d,m.arcs=m.arcs.map(function(e,r){return q.set(e,r),h.slice(e[0],e[1]+1)}),delete m.coordinates,h=null;var g={GeometryCollection:function(e){e.geometries.forEach(v)},LineString:function(e){e.arcs=y(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(y)},Polygon:function(e){e.arcs=e.arcs.map(y)},MultiPolygon:function(e){e.arcs=e.arcs.map(b)}};function y(e){var r=[];do{var t=q.get(e);r.push(e[0]<e[1]?t:~t)}while(e=e.next);return r}function b(e){return e.map(y)}for(var x in c)v(c[x]);return p&&(m.transform=p,m.arcs=(0,n.default)(m.arcs)),m}function f(e){var r,t=e[0],n=e[1];return n<t&&(r=t,t=n,n=r),t+31*n}function l(e,r){var t,n=e[0],u=e[1],a=r[0],o=r[1];return u<n&&(t=n,n=u,u=t),o<a&&(t=a,a=o,o=t),n===a&&u===o}
},{"./bounds":"wOZf","./cut":"ubT2","./dedup":"gQuv","./delta":"vdug","./extract":"BS3s","./geometry":"k2Ou","./hash/hashmap":"NZrI","./prequantize":"b3nw"}],"FQII":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"topology",{enumerable:!0,get:function(){return e.default}});var e=t(require("./src/topology"));function t(e){return e&&e.__esModule?e:{default:e}}
},{"./src/topology":"vbkJ"}],"Pnm9":[function(require,module,exports) {
"use strict";function e(e){var r,t,o=e.objects,n={},a=e.arcs,c=a.length,i=-1,s=new Array(c),l=0,u=-1;function p(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(p);break;case"LineString":b(e.arcs);break;case"MultiLineString":case"Polygon":e.arcs.forEach(b);break;case"MultiPolygon":e.arcs.forEach(y)}}function f(e){e<0&&(e=~e),s[e]||(s[e]=1,++l)}function b(e){e.forEach(f)}function y(e){e.forEach(b)}function g(e){var r;switch(e.type){case"GeometryCollection":r={type:"GeometryCollection",geometries:e.geometries.map(g)};break;case"LineString":r={type:"LineString",arcs:h(e.arcs)};break;case"MultiLineString":r={type:"MultiLineString",arcs:e.arcs.map(h)};break;case"Polygon":r={type:"Polygon",arcs:e.arcs.map(h)};break;case"MultiPolygon":r={type:"MultiPolygon",arcs:e.arcs.map(k)};break;default:return e}return null!=e.id&&(r.id=e.id),null!=e.bbox&&(r.bbox=e.bbox),null!=e.properties&&(r.properties=e.properties),r}function m(e){return e<0?~s[~e]:s[e]}function h(e){return e.map(m)}function k(e){return e.map(h)}for(t in o)p(o[t]);for(r=new Array(l);++i<c;)s[i]&&(s[i]=++u,r[u]=a[i]);for(t in o)n[t]=g(o[t]);return{type:"Topology",bbox:e.bbox,transform:e.transform,objects:n,arcs:r}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"RGAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;var e=t(require("./prune"));function t(e){return e&&e.__esModule?e:{default:e}}function r(t,r){var u,i=t.objects,c={};function a(e){var t,r;switch(e.type){case"Polygon":t=(r=s(e.arcs))?{type:"Polygon",arcs:r}:{type:null};break;case"MultiPolygon":t=(r=e.arcs.map(s).filter(o)).length?{type:"MultiPolygon",arcs:r}:{type:null};break;case"GeometryCollection":t=(r=e.geometries.map(a).filter(l)).length?{type:"GeometryCollection",geometries:r}:{type:null};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function s(e){return e.length&&(t=e[0],r(t,!1))?[e[0]].concat(e.slice(1).filter(p)):null;var t}function p(e){return r(e,!0)}for(u in null==r&&(r=n),i)c[u]=a(i[u]);return(0,e.default)({type:"Topology",bbox:t.bbox,transform:t.transform,objects:c,arcs:t.arcs})}function n(){return!0}function o(e){return e}function l(e){return null!=e.type}
},{"./prune":"Pnm9"}],"mNXB":[function(require,module,exports) {
"use strict";function e(e){var r,t=new Array(e.arcs.length),o=0;function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Polygon":a(e.arcs);break;case"MultiPolygon":e.arcs.forEach(a)}}function a(e){for(var r=0,n=e.length;r<n;++r,++o)for(var a=e[r],c=0,s=a.length;c<s;++c){var l=a[c];l<0&&(l=~l);var f=t[l];null==f?t[l]=o:f!==o&&(t[l]=-1)}}for(r in e.objects)n(e.objects[r]);return function(e){for(var r,o=0,n=e.length;o<n;++o)if(-1===t[(r=e[o])<0?~r:r])return!0;return!1}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"vYdJ":[function(require,module,exports) {
"use strict";function r(r){var e=r[0],a=r[1],t=r[2];return Math.abs((e[0]-t[0])*(a[1]-e[1])-(e[0]-a[0])*(t[1]-e[1]))/2}function e(r){for(var e,a=-1,t=r.length,n=r[t-1],o=0;++a<t;)e=n,n=r[a],o+=e[0]*n[1]-e[1]*n[0];return Math.abs(o)/2}Object.defineProperty(exports,"__esModule",{value:!0}),exports.planarTriangleArea=r,exports.planarRingArea=e;
},{}],"ukPC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;var e=require("topojson-client"),r=require("./planar");function t(t,n,o){return n=null==n?Number.MIN_VALUE:+n,null==o&&(o=r.planarRingArea),function(r,u){return o((0,e.feature)(t,{type:"Polygon",arcs:[r]}).geometry.coordinates[0],u)>=n}}
},{"topojson-client":"ZeSf","./planar":"vYdJ"}],"siUW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var e=r(require("./filterAttached")),t=r(require("./filterWeight"));function r(e){return e&&e.__esModule?e:{default:e}}function u(r,u,f){var i=(0,e.default)(r),n=(0,t.default)(r,u,f);return function(e,t){return i(e,t)||n(e,t)}}
},{"./filterAttached":"mNXB","./filterWeight":"ukPC"}],"qQBJ":[function(require,module,exports) {
"use strict";function r(r,e){return r[1][2]-e[1][2]}function e(){var e={},n=[],t=0;function u(e,t){for(;t>0;){var u=(t+1>>1)-1,f=n[u];if(r(e,f)>=0)break;n[f._=t]=f,n[e._=t=u]=e}}function f(e,u){for(;;){var f=u+1<<1,o=f-1,i=u,_=n[i];if(o<t&&r(n[o],_)<0&&(_=n[i=o]),f<t&&r(n[f],_)<0&&(_=n[i=f]),i===u)break;n[_._=u]=_,n[e._=u=i]=e}}return e.push=function(r){return u(n[r._=t]=r,t++),t},e.pop=function(){if(!(t<=0)){var r,e=n[0];return--t>0&&(r=n[t],f(n[r._=0]=r,0)),e}},e.remove=function(e){var o,i=e._;if(n[i]===e)return i!==--t&&(r(o=n[t],e)<0?u:f)(n[o._=i]=o,i),i},e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=e;
},{}],"uPVu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=u;var r=require("topojson-client"),e=t(require("./heap")),o=require("./planar");function t(r){return r&&r.__esModule?r:{default:r}}function n(r){return[r[0],r[1],0]}function u(t,u){var a=t.transform?(0,r.transform)(t.transform):n,s=(0,e.default)();null==u&&(u=o.planarTriangleArea);var p=t.arcs.map(function(r){var e,o,t,n=[],p=0;for(o=1,t=(r=r.map(a)).length-1;o<t;++o)(e=[r[o-1],r[o],r[o+1]])[1][2]=u(e),n.push(e),s.push(e);for(r[0][2]=r[t][2]=1/0,o=0,t=n.length;o<t;++o)(e=n[o]).previous=n[o-1],e.next=n[o+1];for(;e=s.pop();){var i=e.previous,l=e.next;e[1][2]<p?e[1][2]=p:p=e[1][2],i&&(i.next=l,i[2]=e[2],f(i)),l&&(l.previous=i,l[0]=e[0],f(l))}return r});function f(r){s.remove(r),r[1][2]=u(r),s.push(r)}return{type:"Topology",bbox:t.bbox,objects:t.objects,arcs:p}}
},{"topojson-client":"ZeSf","./heap":"qQBJ","./planar":"vYdJ"}],"CgN3":[function(require,module,exports) {
"use strict";function r(r,n){var u=[];return r.arcs.forEach(function(r){r.forEach(function(r){isFinite(r[2])&&u.push(r[2])})}),u.length&&t(u.sort(e),n)}function t(r,t){if(e=r.length){if((t=+t)<=0||e<2)return r[0];if(t>=1)return r[e-1];var e,n=(e-1)*t,u=Math.floor(n),o=r[u];return o+(r[u+1]-o)*(n-u)}}function e(r,t){return t-r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"quIN":[function(require,module,exports) {
"use strict";function r(r,e){e=null==e?Number.MIN_VALUE:+e;var t=r.arcs.map(function(r){for(var t,o=-1,n=0,s=r.length,a=new Array(s);++o<s;)(t=r[o])[2]>=e&&(a[n++]=[t[0],t[1]]);return a.length=n,a});return{type:"Topology",transform:r.transform,bbox:r.bbox,objects:r.objects,arcs:t}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=r;
},{}],"rG3X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sphericalRingArea=c,exports.sphericalTriangleArea=h;var r=Math.PI,e=2*r,t=r/4,a=r/180,n=Math.abs,s=Math.atan2,i=Math.cos,o=Math.sin;function u(r,e){for(var n,u,c=0,h=r.length,l=0,p=r[e?c++:h-1],M=p[0]*a,f=p[1]*a/2+t,v=i(f),g=o(f);c<h;++c){n=M,M=(p=r[c])[0]*a,f=p[1]*a/2+t,u=v,v=i(f);var x=M-n,b=x>=0?1:-1,d=b*x,A=g*(g=o(f)),P=u*v+A*i(d),_=A*b*o(d);l+=s(_,P)}return l}function c(r,t){var a=u(r,!0);return t&&(a*=-1),2*(a<0?e+a:a)}function h(r){return 2*n(u(r,!1))}
},{}],"QPnS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"filter",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"filterAttached",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"filterAttachedWeight",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"filterWeight",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"planarRingArea",{enumerable:!0,get:function(){return i.planarRingArea}}),Object.defineProperty(exports,"planarTriangleArea",{enumerable:!0,get:function(){return i.planarTriangleArea}}),Object.defineProperty(exports,"presimplify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"quantile",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"simplify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"sphericalRingArea",{enumerable:!0,get:function(){return f.sphericalRingArea}}),Object.defineProperty(exports,"sphericalTriangleArea",{enumerable:!0,get:function(){return f.sphericalTriangleArea}});var e=c(require("./src/filter")),r=c(require("./src/filterAttached")),t=c(require("./src/filterAttachedWeight")),n=c(require("./src/filterWeight")),i=require("./src/planar"),u=c(require("./src/presimplify")),a=c(require("./src/quantile")),l=c(require("./src/simplify")),f=require("./src/spherical");function c(e){return e&&e.__esModule?e:{default:e}}
},{"./src/filter":"RGAn","./src/filterAttached":"mNXB","./src/filterAttachedWeight":"siUW","./src/filterWeight":"ukPC","./src/planar":"vYdJ","./src/presimplify":"uPVu","./src/quantile":"CgN3","./src/simplify":"quIN","./src/spherical":"rG3X"}],"hGzo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("topojson-client");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("topojson-server");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("topojson-simplify");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});
},{"topojson-client":"ZeSf","topojson-server":"FQII","topojson-simplify":"QPnS"}],"hW5V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=[{state:"Alabama",abbr:"AL"},{state:"Alaska",abbr:"AK"},{state:"Arizona",abbr:"AZ"},{state:"Arkansas",abbr:"AR"},{state:"California",abbr:"CA"},{state:"Colorado",abbr:"CO"},{state:"Connecticut",abbr:"CT"},{state:"Delaware",abbr:"DE"},{state:"District of Columbia",abbr:"DC"},{state:"Florida",abbr:"FL"},{state:"Georgia",abbr:"GA"},{state:"Hawaii",abbr:"HI"},{state:"Idaho",abbr:"ID"},{state:"Illinois",abbr:"IL"},{state:"Indiana",abbr:"IN"},{state:"Iowa",abbr:"IA"},{state:"Kansas",abbr:"KS"},{state:"Kentucky",abbr:"KY"},{state:"Louisiana",abbr:"LA"},{state:"Maine",abbr:"ME"},{state:"Montana",abbr:"MT"},{state:"Nebraska",abbr:"NE"},{state:"Nevada",abbr:"NV"},{state:"New Hampshire",abbr:"NH"},{state:"New Jersey",abbr:"NJ"},{state:"New Mexico",abbr:"NM"},{state:"New York",abbr:"NY"},{state:"North Carolina",abbr:"NC"},{state:"North Dakota",abbr:"ND"},{state:"Ohio",abbr:"OH"},{state:"Oklahoma",abbr:"OK"},{state:"Oregon",abbr:"OR"},{state:"Maryland",abbr:"MD"},{state:"Massachusetts",abbr:"MA"},{state:"Michigan",abbr:"MI"},{state:"Minnesota",abbr:"MN"},{state:"Mississippi",abbr:"MS"},{state:"Missouri",abbr:"MO"},{state:"Pennsylvania",abbr:"PA"},{state:"Rhode Island",abbr:"RI"},{state:"South Carolina",abbr:"SC"},{state:"South Dakota",abbr:"SD"},{state:"Tennessee",abbr:"TN"},{state:"Texas",abbr:"TX"},{state:"Utah",abbr:"UT"},{state:"Vermont",abbr:"VT"},{state:"Virginia",abbr:"VA"},{state:"Washington",abbr:"WA"},{state:"West Virginia",abbr:"WV"},{state:"Wisconsin",abbr:"WI"},{state:"Wyoming",abbr:"WY"},{state:"Washington DC",abbr:"DC"}];exports.default=a;
},{}],"xZJw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("topojson")),t=r(require("./states"));function r(e){return e&&e.__esModule?e:{default:e}}function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function i(e){if(e&&e.__esModule)return e;var t=n();if(t&&t.has(e))return t.get(e);var r={};if(null!=e){var i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var u=i?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=e[o]}}return r.default=e,t&&t.set(e,r),r}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(r,!0).forEach(function(t){s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var r=e.toLowerCase(),n=t.default.find(function(e){return e.state.toLowerCase()===r});return n?n.abbr:""}function a(e){d3.json("assets/usa.json",function(t,r){if(r){var n=r.objects.states.geometries.filter(function(e){return e.id<60});r.objects.states.geometries=n}e(t,r)})}function f(e){return e.split("|").map(function(e){var t=e.split("-");return{index:+t[0],dist:+t[1]}})}function l(e){return e.split("|").map(function(e){var t=e.split("-");return{abv:+t[0],score:+t[1],reviews:+t[2]}})}function p(e){var t=e.split(/\(|\//)[0].substring(0,35);return t.length>32?"".concat(t.substring(0,32),"..."):t}function d(e){return u({},e,{lat:+e.lat,lng:+e.lng,year:+e.year,cities:f(e.cities),beers:l(e.beers),cityIndex:e.cityIndex?+e.cityIndex:null,name:p(e.name)})}function b(e){d3.csv("assets/breweries_geocoded_with_stats.csv",d,function(t,r){e(t,r)})}function v(e){return u({},e,{lat:+e.lat,lng:+e.lng,population:+e.population,index:+e.index,stateAbbr:c(e.state)})}function y(e){d3.csv("assets/cities_geocoded_40k.csv",v,function(t,r){e(t,r)})}function O(){return new Promise(function(e,t){d3.queue().defer(a).defer(b).defer(y).awaitAll(function(r,n){r?t(r):e(n)})})}var g={init:O};exports.default=g;
},{"topojson":"hGzo","./states":"hW5V"}],"vL5c":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof e&&e.amd?e(n):t.scrollama=n()}(this,function(){"use strict";function e(e){return"scrollama__debug-offset--"+e}function t(t){!function(t){var n=t.id,o=t.offsetVal,r=t.stepClass,i=document.createElement("div");i.id=e(n),i.className="scrollama__debug-offset",i.style.position="fixed",i.style.left="0",i.style.width="100%",i.style.height="0",i.style.borderTop="2px dashed black",i.style.zIndex="9999";var s=document.createElement("p");s.innerHTML='".'+r+'" trigger: <span>'+o+"</span>",s.style.fontSize="12px",s.style.fontFamily="monospace",s.style.color="black",s.style.margin="0",s.style.padding="6px",i.appendChild(s),document.body.appendChild(i)}({id:t.id,offsetVal:t.offsetVal,stepClass:t.stepEl[0].className})}function n(e){var t=e.id,n=e.index,o=e.state,r="scrollama__debug-step--"+t+"-"+n,i=document.getElementById(r+"_above"),s=document.getElementById(r+"_below"),a="enter"===o?"block":"none";i&&(i.style.display=a),s&&(s.style.display=a)}return function(){var o=["stepAbove","stepBelow","stepProgress","viewportAbove","viewportBelow"],r={},i={},s=null,a=[],l=[],c=[],f=[],u=0,p=0,d=0,v=0,g=0,m=0,x=!1,b=!1,w=!1,h=!1,y=!1,E=!1,M="down",I="percent",A=[];function C(e){console.error("scrollama error: "+e)}function O(){r={stepEnter:function(){},stepExit:function(){},stepProgress:function(){}},i={}}function S(e){return e.getBoundingClientRect().top+window.pageYOffset-(document.body.clientTop||0)}function B(e){return+e.getAttribute("data-scrollama-index")}function H(){window.pageYOffset>g?M="down":window.pageYOffset<g&&(M="up"),g=window.pageYOffset}function k(e){i[e]&&i[e].forEach(function(e){return e.disconnect()})}function _(){var t,n;d=window.innerHeight,t=document.body,n=document.documentElement,v=Math.max(t.scrollHeight,t.offsetHeight,n.clientHeight,n.scrollHeight,n.offsetHeight),p=u*("pixels"===I?1:d),x&&(l=a.map(function(e){return e.getBoundingClientRect().height}),c=a.map(S),b&&D()),w&&function(t){var n=t.id,o=t.offsetMargin,r=t.offsetVal,i="pixels"===t.format?"px":"",s=e(n),a=document.getElementById(s);a.style.top=o+"px",a.querySelector("span").innerText=""+r+i}({id:s,offsetMargin:p,offsetVal:u,format:I})}function N(e){if(e&&!b){if(!x)return C("scrollama error: enable() called before scroller was ready"),void(b=!1);D()}!e&&b&&o.forEach(k),b=e}function P(e,t){var n=B(e);void 0!==t&&(f[n].progress=t);var o={element:e,index:n,progress:f[n].progress};"enter"===f[n].state&&r.stepProgress(o)}function R(e,t){if("above"===t)for(var n=0;n<e;n+=1){var o=f[n];"enter"!==o.state&&"down"!==o.direction?(T(a[n],"down",!1),q(a[n],"down")):"enter"===o.state&&q(a[n],"down")}else if("below"===t)for(var r=f.length-1;r>e;r-=1){var i=f[r];"enter"===i.state&&q(a[r],"up"),"down"===i.direction&&(T(a[r],"up",!1),q(a[r],"up"))}}function T(e,t,o){void 0===o&&(o=!0);var i=B(e),a={element:e,index:i,direction:t};f[i].direction=t,f[i].state="enter",y&&o&&"down"===t&&R(i,"above"),y&&o&&"up"===t&&R(i,"below"),r.stepEnter&&!A[i]&&(r.stepEnter(a,f),w&&n({id:s,index:i,state:"enter"}),E&&(A[i]=!0)),h&&P(e)}function q(e,t){var o=B(e),i={element:e,index:o,direction:t};h&&("down"===t&&f[o].progress<1?P(e,1):"up"===t&&f[o].progress>0&&P(e,0)),f[o].direction=t,f[o].state="exit",r.stepExit(i,f),w&&n({id:s,index:o,state:"exit"})}function V(e){var t=e[0];H();var n=t.isIntersecting,o=t.boundingClientRect,r=t.target,i=o.top,s=o.bottom,a=i-p,l=s-p,c=B(r),u=f[c];n&&a<=0&&l>=0&&"down"===M&&"enter"!==u.state&&T(r,M),!n&&a>0&&"up"===M&&"enter"===u.state&&q(r,M)}function Y(e){var t=e[0];H();var n=t.isIntersecting,o=t.boundingClientRect,r=t.target,i=o.top,s=o.bottom,a=i-p,l=s-p,c=B(r),u=f[c];n&&a<=0&&l>=0&&"up"===M&&"enter"!==u.state&&T(r,M),!n&&l<0&&"down"===M&&"enter"===u.state&&q(r,M)}function F(e){var t=e[0];H();var n=t.isIntersecting,o=t.target,r=B(o),i=f[r];n&&"down"===M&&"down"!==i.direction&&"enter"!==i.state&&(T(o,"down"),q(o,"down"))}function j(e){var t=e[0];H();var n=t.isIntersecting,o=t.target,r=B(o),i=f[r];n&&"up"===M&&"down"===i.direction&&"enter"!==i.state&&(T(o,"up"),q(o,"up"))}function z(e){var t=e[0];H();var n=t.isIntersecting,o=t.intersectionRatio,r=t.boundingClientRect,i=t.target,s=r.bottom;n&&s-p>=0&&P(i,+o)}function L(){i.stepProgress=a.map(function(e,t){var n=l[t]-p+"px 0px "+(-d+p)+"px 0px",o=function(e){for(var t=Math.ceil(e/m),n=[],o=1/t,r=0;r<t;r+=1)n.push(r*o);return n}(l[t]),r=new IntersectionObserver(z,{rootMargin:n,threshold:o});return r.observe(e),r})}function D(){o.forEach(k),i.viewportAbove=a.map(function(e,t){var n=v-c[t],o=p-d-l[t],r=new IntersectionObserver(F,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),i.viewportBelow=a.map(function(e,t){var n=-p-l[t],o=p-d+l[t]+v,r=new IntersectionObserver(j,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),i.stepAbove=a.map(function(e,t){var n=-p+l[t],o=new IntersectionObserver(V,{rootMargin:n+"px 0px "+(p-d)+"px 0px"});return o.observe(e),o}),i.stepBelow=a.map(function(e,t){var n=-p,o=p-d+l[t],r=new IntersectionObserver(Y,{rootMargin:n+"px 0px "+o+"px 0px"});return r.observe(e),r}),h&&L()}function G(e){return!(!e||1!==e.nodeType)&&(function(e){var t=window.getComputedStyle(e);return("scroll"===t.overflowY||"auto"===t.overflowY)&&e.scrollHeight>e.clientHeight}(e)?e:G(e.parentNode))}var J={};return J.setup=function(e){var n=e.step,o=e.offset;void 0===o&&(o=.5);var r=e.progress;void 0===r&&(r=!1);var i=e.threshold;void 0===i&&(i=4);var l=e.debug;void 0===l&&(l=!1);var c=e.order;void 0===c&&(c=!0);var p,d,v,g,b,M=e.once;if(void 0===M&&(M=!1),O(),d=(p="abcdefghijklmnopqrstuv").length,v=Date.now(),s=""+[0,0,0].map(function(e){return p[Math.floor(Math.random()*d)]}).join("")+v,g=n,void 0===b&&(b=document),!(a="string"==typeof g?Array.from(b.querySelectorAll(g)):g instanceof Element?[g]:g instanceof NodeList?Array.from(g):g instanceof Array?g:[]).length)return C("no step elements"),J;var I=a.reduce(function(e,t){return e||G(t.parentNode)},!1);return I&&console.error("scrollama error: step elements cannot be children of a scrollable element. Remove any css on the parent element with overflow: scroll; or overflow: auto; on elements with fixed height.",I),w=l,h=r,y=c,E=M,J.offsetTrigger(o),m=Math.max(1,+i),x=!0,w&&t({id:s,stepEl:a,offsetVal:u}),a.forEach(function(e,t){return e.setAttribute("data-scrollama-index",t)}),f=a.map(function(){return{direction:null,state:null,progress:0}}),_(),J.enable(),J},J.resize=function(){return _(),J},J.enable=function(){return N(!0),J},J.disable=function(){return N(!1),J},J.destroy=function(){N(!1),O()},J.offsetTrigger=function(e){if(null===e)return u;if("number"==typeof e)I="percent",e>1&&C("offset value is greater than 1. Fallback to 1."),e<0&&C("offset value is lower than 0. Fallback to 0."),u=Math.min(Math.max(0,e),1);else if("string"==typeof e&&e.indexOf("px")>0){var t=+e.replace("px","");isNaN(t)?(C("offset value must be in 'px' format. Fallback to 0.5."),u=.5):(I="pixels",u=t)}else C("offset value does not include 'px'. Fallback to 0.5."),u=.5;return J},J.onStepEnter=function(e){return"function"==typeof e?r.stepEnter=e:C("onStepEnter requires a function"),J},J.onStepExit=function(e){return"function"==typeof e?r.stepExit=e:C("onStepExit requires a function"),J},J.onStepProgress=function(e){return"function"==typeof e?r.stepProgress=e:C("onStepProgress requires a function"),J},J}});
},{}],"Xrkb":[function(require,module,exports) {
"use strict";function e(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function r(r){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?e(i,!0).forEach(function(e){n(r,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):e(i).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(i,e))})}return r}function n(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=1,i={all:[0,100],light:[0,4],medium:[4,7],heavy:[7,100]};function u(e){return d3.sum(e,function(e){return e.beers.score})/d3.sum(e,function(e){return e.beers.reviews})}function c(e,r,n){var t=e.map(function(e){return e});return"number"==typeof n&&t.unshift({index:n,dist:0}),t.filter(function(e){return e.dist<=r}).map(function(e){return e.index})}function o(e,r){var n=e.filter(function(e){return e.abv>=i[r][0]&&e.abv<i[r][1]});return n.length?{score:d3.sum(n,function(e){return e.score*e.reviews}),reviews:d3.sum(n,function(e){return e.reviews})}:null}function a(e,r){return r.map(function(e){return{score:e.beers.score/e.beers.reviews,name:e.name}}).sort(function(e,r){return d3.descending(e.score,r.score)}).slice(0,5).map(function(e){return e.name})}function s(e){var n=e.cityReduced,t=e.breweryReduced,i=e.nearby;return n.map(function(e){var n=t.filter(function(r){return r.cities.includes(e.index)}),i=n.length,c=u(n),o=n.map(function(e){return{lat:e.lat,lng:e.lng}}),s=a(e.city,n);return r({},e,{score:c,count:i,breweryCoords:o,breweryNames:s})}).filter(function(e){return e.count>=i})}function d(e){var n=e.data,t=e.balance,i=d3.extent(n,function(e){return e.score}),u=d3.scaleLinear().domain(i).range([0,t.quality]),c=d3.scaleLinear().domain(d3.extent(n,function(e){return e.count})).range([0,t.quantity]),o=d3.scaleQuantize().domain(d3.extent(n,function(e){return e.score})).range(["C-","C","C+","B-","B","B+","A-","A","A+"]);return n.map(function(e){return r({},e,{grade:o(e.score),weighted:u(e.score)+c(e.count)})}).sort(function(e,r){return d3.descending(e.weighted,r.weighted)||d3.descending(e.score,r.score)||d3.descending(e.count,r.count)}).map(function(e,n){return r({},e,{rank:n})})}function f(e){var n=e.cityData,i=e.breweryData,u=e.dist,a=void 0===u?20:u,d=e.abv,f=void 0===d?"all":d,l=e.nearby,b=void 0===l?5:l,p=e.max,y=void 0===p?1e3:p,m=i.map(function(e){return r({},e,{cities:c(e.cities,a,e.cityIndex).slice(0,t),beers:o(e.beers,f)})}).filter(function(e){return e.beers&&e.cities.length}),v=[];return m.forEach(function(e){e.cities.forEach(function(e){return v[e]=!0})}),s({cityReduced:n.filter(function(e){return v[e.index]}),breweryReduced:m,nearby:b}).slice(0,y)}var l={init:f,weight:d};exports.default=l;
},{}],"y9tF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=c(require("topojson")),e=n(require("scrollama")),a=n(require("./rank"));function n(t){return t&&t.__esModule?t:{default:t}}function r(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return r=function(){return t},t}function c(t){if(t&&t.__esModule)return t;var e=r();if(e&&e.has(t))return e.get(t);var a={};if(null!=t){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var o=n?Object.getOwnPropertyDescriptor(t,c):null;o&&(o.get||o.set)?Object.defineProperty(a,c,o):a[c]=t[c]}}return a.default=t,e&&e.set(t,a),a}function o(t,e){return l(t)||s(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,r=!1,c=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done)&&(a.push(o.value),!e||a.length!==e);n=!0);}catch(s){r=!0,c=s}finally{try{n||null==i.return||i.return()}finally{if(r)throw c}}return a}}function l(t){if(Array.isArray(t))return t}var d=!0,u=["#dbcdbd","#e8b8a0","#f2a385","#f88d69","#fc764f","#fe5c34","#ff3814"].reverse(),f=d3.select("body"),p=d3.select(".capital__chart"),y=d3.select(".capital__prose"),m=p.select("svg"),h=20,g=7,b=12,v=3,w=(0,e.default)(),x=0,k=0,_=0,M=1,I=null,S=null,A=null,j=null,z=null,O={lat:42,lng:-72},D=null,q={quality:80,quantity:20},W={rank:d3.scaleLinear(),fill:d3.scaleQuantile(),angle:0},P=d3.geoAlbersUsa().scale(1),C=d3.geoPath(),N=d3.zoom().scaleExtent([1,g]);function E(t){var e=t.city,a=t.state,n=e.toLowerCase().replace(/\W/g,""),r=a.toLowerCase().replace(/\W/g,"");return"".concat(n).concat(r)}function U(t){var e=t.toString();return t>10&&t<20?"".concat(t,"th"):e.endsWith("1")?"".concat(t,"st"):e.endsWith("2")?"".concat(t,"nd"):e.endsWith("3")?"".concat(t,"rd"):"".concat(t,"th")}function Y(){var t=1/d3.event.transform.k,e=t*b,a=m.select(".g-map").attr("transform",d3.event.transform);a.selectAll("path").style("stroke-width","".concat(t,"px")),a.selectAll(".locator-text").style("font-size","".concat(e,"px")).attr("x",t*v*2),a.selectAll(".locator-circle").attr("r",t*v).attr("cy",t*-v/2).style("stroke-width","".concat(t,"px"))}function L(){}function T(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;m.transition().duration(t).call(N.transform,d3.zoomIdentity),p.select(".map-states").transition().duration(t).style("opacity",.5)}function B(t){var e=t.city,a=t.down,n=t.zoomScale;p.transition().duration(250).style("opacity",1);var r=o(P([e.lng,e.lat]),2),c=r[0],i=r[1],s=a?3500:500,l=a?d3.easeCubicInOut:d3.easeLinear,d=x/2-n*c,u=k/2-n*i,f=d3.zoomIdentity.translate(d,u).scale(n);m.transition().duration(s).ease(l).call(N.transform,f)}function H(t){var e=d3.scan(t,function(t,e){return Math.abs(t.lat-O.lat)+Math.abs(t.lng-O.lng)-(Math.abs(e.lat-O.lat)+Math.abs(e.lng-O.lng))});return e>-1?t[e]:null}function Q(t){var e=t.editorialMatch,a=t.exactMatch;if("US"===O.origin){if(e&&a){var n=e.rank<10?"Almost!":"Not quite.";return"<strong>".concat(n,"</strong> After")}if(a){var r=a.rank<10?"Almost!":"Not quite.";return"<strong>".concat(r,"</strong> After")}return"<strong>Nope.</strong> It doesnâ€™t even make the list. But after"}return"You might think our biggest city, New York City, is the best, but not quite. After"}function R(t){var e=t.exactMatch,a=t.nearestMatch;return e?e.city:"nearby ".concat(a.city,", ").concat(a.state)}function F(t){var e=t.editorialMatch,a=t.nearestMatch,n=t.nearbyText;return e?"".concat(n," comes in ").concat(U(e.rank+1)," out of the 800+ biggest cities in the country."):"".concat(n," comes in ").concat(U(a.rank+1)," out of the 800+ biggest cities in the country.")}function G(){var t=a.default.init({cityData:A,breweryData:S,dist:50,nearby:1}),e=a.default.weight({data:t,balance:q}),n=E(O),r=e.find(function(t){return E(t)===n}),c=r||H(e),o=z.find(function(t){return t.index===c.index});if(c.index===D.index)y.select(".text--match-best").classed("is-visible",!0),y.select(".prose__step").remove();else{var i=y.select(".text--best");i.classed("is-visible",!0),i.select(".place").text("".concat(D.city,", ").concat(D.state));var s=y.select(".text--local");s.classed("is-visible",!0);var l=Q({editorialMatch:o,exactMatch:r,nearestMatch:c}),d=R({editorialMatch:o,exactMatch:r,nearestMatch:c}),u=F({editorialMatch:o,exactMatch:r,nearestMatch:c,nearbyText:d}),f="\n\t\t\t".concat(l,"\n\t\t\t").concat(" analyzing over 1,600 breweries, ","\n\t\t\t").concat(u,"\n\t\t");s.html(f)}O.lat=c.lat,O.lng=c.lng,O.city=c.city,m.select(".map-custom text").text(O.city),m.select(".map-best text").text(D.city),V()}function J(t){var e=m.select(".cities-container"),a=e.selectAll(".city").data(z,function(t){return t.index}),n=a.enter().append("g").attr("class","city").attr("transform",function(t){var e=o(P([t.lng,t.lat]),2),a=e[0],n=e[1];return"translate(".concat(a,", ").concat(n,")")});n.append("circle").attr("cx",0).attr("cy",0).attr("r",0).style("fill",function(t){return W.fill(t.rank)}).style("stroke",function(t){return d3.color(W.fill(t.rank)).darker(.6)}),n.append("text").attr("class","text--bg").attr("text-anchor","middle").attr("y",function(t){return-W.rank(t.rank)-b/4}).style("display",function(t){return t.rank<10?"block":"none"}).text(function(t){return"#".concat(t.rank+1," ").concat(t.city)}),n.append("text").attr("class","text--fg").attr("text-anchor","middle").attr("y",function(t){return-W.rank(t.rank)-b/4}).style("display",function(t){return t.rank<10?"block":"none"}).text(function(t){return"#".concat(t.rank+1," ").concat(t.city)}),(a=n.merge(a)).select("circle").transition().duration(3e3).delay(function(e){return e.rank*(t?60:20)}).attr("r",function(e){return t?W.rank(e.rank)*M:0}),a.selectAll("text").transition().duration(t?3e3:1e3).delay(function(e){return e.rank*(t?80:20)}).style("opacity",function(e){return t?1:0}),e.transition().attr("transform","translate(0,0) rotate(0)"),a.transition().attr("transform",function(t){var e=o(P([t.lng,t.lat]),2),a=e[0],n=e[1];return"translate(".concat(a,", ").concat(n,")")})}function K(){_=window.innerHeight,x=p.node().offsetWidth-2*h,k=_-2*h,d=f.classed("is-full"),M=d?1:.5}function V(){K(),m.attr("width",x+2*h).attr("height",k+2*h),m.select(".g-graphic").attr("transform","translate(".concat(h,", ").concat(h,")")),P.fitSize([x,k],j),C.projection(P),m.select(".state__border").attr("d",C),m.select(".map-custom").attr("transform",function(){var t=o(P([O.lng,O.lat]),2),e=t[0],a=t[1];return"translate(".concat(e,", ").concat(a,")")}),m.select(".map-best").attr("transform",function(){var t=o(P([D.lng,D.lat]),2),e=t[0],a=t[1];return"translate(".concat(e,", ").concat(a,")")}),d||(d3.selectAll(".prose__step").style("height","".concat(Math.floor(.9*_),"px")),d3.select(".prose__step:last-child").style("height","".concat(Math.floor(.6*_),"px"))),w.resize()}function X(){j=t.feature(I,I.objects.states);var e=m.append("g").attr("class","g-graphic").append("g").attr("class","g-map");e.append("g").attr("class","map-states").append("path").datum(t.mesh(I,I.objects.states)).attr("class","state__border"),e.append("g").attr("class","map-cities").append("g").attr("class","cities-container");var a=e.append("g").attr("class","map-custom");a.append("circle").attr("class","locator-circle").attr("cx",0).attr("cy",-v/2).attr("r",v),a.append("text").attr("alignment-baseline","middle").attr("class","locator-text").attr("y",0).attr("x",2*v);var n=e.append("g").attr("class","map-best");n.append("circle").attr("class","locator-circle").attr("cx",0).attr("cy",-v/2).attr("r",v),n.append("text").attr("class","locator-text").attr("alignment-baseline","middle").attr("y",0).attr("x",2*v),N.on("zoom",Y).on("end",L)}function Z(t){var e=t.el,a=t.fadeIn,n=a?1:0,r=a?1:2,c=t.down?3e3:500,o=d3.transition().duration(c/r);m.select(e).transition(o).style("opacity",n)}function $(t){var e=t.step,a=t.down;switch(e){case"local":B({city:O,zoomScale:g,down:a}),Z({el:".map-custom",fadeIn:!0,down:a}),Z({el:".map-best",fadeIn:!1,down:a}),Z({el:".map-cities",fadeIn:!1,down:a});break;case"best":B({city:D,zoomScale:g,down:a}),Z({el:".map-custom",fadeIn:!1,down:a}),Z({el:".map-best",fadeIn:!0,down:a}),Z({el:".map-cities",fadeIn:!1,down:a});break;case"explanation":B({city:D,zoomScale:Math.floor(g/2),down:a}),Z({el:".map-custom",fadeIn:!1,down:a}),Z({el:".map-best",fadeIn:!1,down:a}),Z({el:".map-cities",fadeIn:!1,down:a}),J(!1);break;case"everywhere":T(2e3),Z({el:".map-custom",fadeIn:!1,down:a}),Z({el:".map-best",fadeIn:!1,down:a}),Z({el:".map-cities",fadeIn:!0,down:a}),Z({el:".map-states",fadeIn:!0,down:a}),J(!0);break;case"rank":T(),J(!1),Z({el:".map-custom",fadeIn:!1,down:a}),Z({el:".map-best",fadeIn:!1,down:a}),Z({el:".map-cities",fadeIn:!0,down:a}),Z({el:".map-states",fadeIn:!1,down:a});break;default:T(),Z({el:".map-custom",fadeIn:!1,down:a}),Z({el:".map-best",fadeIn:!1,down:a}),Z({el:".map-cities",fadeIn:!1,down:a})}}function tt(){var t=d3.select(".intro__prompt");t.classed("is-reveal",!0),d3.select("main").classed("is-reveal",!0).style("height","auto"),d3.select(".pudding-footer").classed("is-reveal",!0),G(),w.setup({step:".prose__step",offset:.33}).onStepEnter(function(t){var e=t.element,a=t.direction;$({step:d3.select(e).attr("data-step"),down:"down"===a})}).onStepExit(function(t){var e=t.element,a=t.direction;if(window.scrollY>0){var n=d3.select(e).attr("data-step"),r="down"===a;"Santa Rosa"!==O.city||"California"!==O.state||"best"!==n||r||$({step:"default",down:r}),"local"!==n||r||$({step:"default",down:r}),"rank"===n&&$({step:n,down:r})}});var a=(0,e.default)();a.setup({step:".capital__prose",offset:.95}).onStepEnter(function(){t.classed("is-reveal",!1),a.disable()})}function et(){W.rank.domain(d3.extent(z,function(t){return t.rank})).range([16,2]),W.fill.domain(z.map(function(t){return t.rank})).range(u)}function at(){K(),X(),et(),V()}function nt(t){var e=t.city,a=t.region,n=t.country,r=o(t.loc.split(","),2),c=+r[0],i=+r[1],s=(e&&"".concat(n," | ").concat(a," | ").concat(e),null);"US"===n&&e?s="Could ".concat((O={city:e,lat:c,lng:i,state:a,origin:n}).city,", ").concat(O.state,", really be the microbrew capital of the US?"):(O={city:"New York",lat:40,lng:-72,state:"New York",origin:null},s="But what city is the microbrew capital of the US?"),d3.select(".intro__hed span").text(s).classed("is-visible",!0)}function rt(t){I=t.usaData,S=t.breweryData,A=t.cityData;var e=a.default.init({cityData:A,breweryData:S,max:50});z=a.default.weight({data:e,balance:q}).reverse(),D=z[49],at()}var ct={init:rt,resize:V,setupScroll:tt,hed:nt};exports.default=ct;
},{"topojson":"hGzo","scrollama":"vL5c","./rank":"Xrkb"}],"p3wi":[function(require,module,exports) {
var define;
var t;!function(e){"function"==typeof t&&t.amd?t([],e):"object"==typeof exports?module.exports=e():window.noUiSlider=e()}(function(){"use strict";var t="14.2.0";function e(t){t.parentElement.removeChild(t)}function r(t){return null!=t}function n(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function o(t,e,r){r>0&&(u(t,e),setTimeout(function(){c(t,e)},r))}function a(t){return Math.max(Math.min(t,100),0)}function s(t){return Array.isArray(t)?t:[t]}function l(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function c(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function p(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function f(t,e){return 100/(e-t)}function d(t,e){return 100*e/(t[1]-t[0])}function h(t,e){for(var r=1;t>=e[r];)r+=1;return r}function m(t,e,r){if(r>=t.slice(-1)[0])return 100;var n=h(r,t),i=t[n-1],o=t[n],a=e[n-1],s=e[n];return a+function(t,e){return d(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([i,o],r)/f(a,s)}function g(t,e,r,n){if(100===n)return n;var i=h(n,t),o=t[i-1],a=t[i];return r?n-o>(a-o)/2?a:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(n-t[i-1],e[i-1]):n}function v(e,r,n){var o;if("number"==typeof r&&(r=[r]),!Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'range' contains invalid value.");if(!i(o="min"===e?0:"max"===e?100:parseFloat(e))||!i(r[0]))throw new Error("noUiSlider ("+t+"): 'range' value isn't numeric.");n.xPct.push(o),n.xVal.push(r[0]),o?n.xSteps.push(!isNaN(r[1])&&r[1]):isNaN(r[1])||(n.xSteps[0]=r[1]),n.xHighestCompleteStep.push(0)}function b(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=d([r.xVal[t],r.xVal[t+1]],e)/f(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function S(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort(function(t,e){return t[0][0]-e[0][0]}):i.sort(function(t,e){return t[0]-e[0]}),n=0;n<i.length;n++)v(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)b(n,this.xNumSteps[n],this)}S.prototype.getMargin=function(e){var r=this.xNumSteps[0];if(r&&e/r%1!=0)throw new Error("noUiSlider ("+t+"): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&d(this.xVal,e)},S.prototype.toStepping=function(t){return t=m(this.xVal,this.xPct,t)},S.prototype.fromStepping=function(t){return function(t,e,r){if(r>=100)return t.slice(-1)[0];var n=h(r,e),i=t[n-1],o=t[n],a=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(r-a)*f(a,e[n]))}(this.xVal,this.xPct,t)},S.prototype.getStep=function(t){return t=g(this.xPct,this.xSteps,this.snap,t)},S.prototype.getDefaultStep=function(t,e,r){var n=h(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},S.prototype.getNearbySteps=function(t){var e=h(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},S.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(l);return Math.max.apply(null,t)},S.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var x={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function w(e){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(e))return!0;throw new Error("noUiSlider ("+t+"): 'format' requires 'to' and 'from' methods.")}function y(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'step' is not numeric.");e.singleStep=r}function E(e,r){if("object"!=typeof r||Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'range' is not an object.");if(void 0===r.min||void 0===r.max)throw new Error("noUiSlider ("+t+"): Missing 'min' or 'max' in 'range'.");if(r.min===r.max)throw new Error("noUiSlider ("+t+"): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new S(r,e.snap,e.singleStep)}function C(e,r){if(r=s(r),!Array.isArray(r)||!r.length)throw new Error("noUiSlider ("+t+"): 'start' option is incorrect.");e.handles=r.length,e.start=r}function N(e,r){if(e.snap=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'snap' option must be a boolean.")}function U(e,r){if(e.animate=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'animate' option must be a boolean.")}function P(e,r){if(e.animationDuration=r,"number"!=typeof r)throw new Error("noUiSlider ("+t+"): 'animationDuration' option must be a number.")}function V(e,r){var n,i=[!1];if("lower"===r?r=[!0,!1]:"upper"===r&&(r=[!1,!0]),!0===r||!1===r){for(n=1;n<e.handles;n++)i.push(r);i.push(!1)}else{if(!Array.isArray(r)||!r.length||r.length!==e.handles+1)throw new Error("noUiSlider ("+t+"): 'connect' option doesn't match handle count.");i=r}e.connect=i}function k(e,r){switch(r){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider ("+t+"): 'orientation' option is invalid.")}}function A(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'margin' option must be numeric.");if(0!==r&&(e.margin=e.spectrum.getMargin(r),!e.margin))throw new Error("noUiSlider ("+t+"): 'margin' option is only supported on linear sliders.")}function M(e,r){if(!i(r))throw new Error("noUiSlider ("+t+"): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(r),!e.limit||e.handles<2)throw new Error("noUiSlider ("+t+"): 'limit' option is only supported on linear sliders with 2 or more handles.")}function O(e,r){if(!i(r)&&!Array.isArray(r))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(r)&&2!==r.length&&!i(r[0])&&!i(r[1]))throw new Error("noUiSlider ("+t+"): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==r){if(Array.isArray(r)||(r=[r,r]),e.padding=[e.spectrum.getMargin(r[0]),e.spectrum.getMargin(r[1])],!1===e.padding[0]||!1===e.padding[1])throw new Error("noUiSlider ("+t+"): 'padding' option is only supported on linear sliders.");if(e.padding[0]<0||e.padding[1]<0)throw new Error("noUiSlider ("+t+"): 'padding' option must be a positive number(s).");if(e.padding[0]+e.padding[1]>100)throw new Error("noUiSlider ("+t+"): 'padding' option must not exceed 100% of the range.")}}function L(e,r){switch(r){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider ("+t+"): 'direction' option was not recognized.")}}function D(e,r){if("string"!=typeof r)throw new Error("noUiSlider ("+t+"): 'behaviour' must be a string containing options.");var n=r.indexOf("tap")>=0,i=r.indexOf("drag")>=0,o=r.indexOf("fixed")>=0,a=r.indexOf("snap")>=0,s=r.indexOf("hover")>=0,l=r.indexOf("unconstrained")>=0;if(o){if(2!==e.handles)throw new Error("noUiSlider ("+t+"): 'fixed' behaviour must be used with 2 handles");A(e,e.start[1]-e.start[0])}if(l&&(e.margin||e.limit))throw new Error("noUiSlider ("+t+"): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:n||a,drag:i,fixed:o,snap:a,hover:s,unconstrained:l}}function z(e,r){if(!1!==r)if(!0===r){e.tooltips=[];for(var n=0;n<e.handles;n++)e.tooltips.push(!0)}else{if(e.tooltips=s(r),e.tooltips.length!==e.handles)throw new Error("noUiSlider ("+t+"): must pass a formatter for all handles.");e.tooltips.forEach(function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider ("+t+"): 'tooltips' must be passed a formatter or 'false'.")})}}function H(t,e){t.ariaFormat=e,w(e)}function j(t,e){t.format=e,w(e)}function F(e,r){if(e.keyboardSupport=r,"boolean"!=typeof r)throw new Error("noUiSlider ("+t+"): 'keyboardSupport' option must be a boolean.")}function R(t,e){t.documentElement=e}function T(e,r){if("string"!=typeof r&&!1!==r)throw new Error("noUiSlider ("+t+"): 'cssPrefix' must be a string or `false`.");e.cssPrefix=r}function B(e,r){if("object"!=typeof r)throw new Error("noUiSlider ("+t+"): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var n in e.cssClasses={},r)r.hasOwnProperty(n)&&(e.cssClasses[n]=e.cssPrefix+r[n]);else e.cssClasses=r}function q(e){var n={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:x,format:x},i={step:{r:!1,t:y},start:{r:!0,t:C},connect:{r:!0,t:V},direction:{r:!0,t:L},snap:{r:!1,t:N},animate:{r:!1,t:U},animationDuration:{r:!1,t:P},range:{r:!0,t:E},orientation:{r:!1,t:k},margin:{r:!1,t:A},limit:{r:!1,t:M},padding:{r:!1,t:O},behaviour:{r:!0,t:D},ariaFormat:{r:!1,t:H},format:{r:!1,t:j},tooltips:{r:!1,t:z},keyboardSupport:{r:!0,t:F},documentElement:{r:!1,t:R},cssPrefix:{r:!0,t:T},cssClasses:{r:!0,t:B}},o={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(i).forEach(function(a){if(!r(e[a])&&void 0===o[a]){if(i[a].r)throw new Error("noUiSlider ("+t+"): '"+a+"' is required.");return!0}i[a].t(n,r(e[a])?e[a]:o[a])}),n.pips=e.pips;var a=document.createElement("div"),s=void 0!==a.style.msTransform,l=void 0!==a.style.transform;n.transformRule=l?"transform":s?"msTransform":"webkitTransform";return n.style=[["left","top"],["right","bottom"]][n.dir][n.ort],n}function X(r,i,l){var f,d,h,m,g,v,b,S,x=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(r){}return t}(),y=r,E=i.spectrum,C=[],N=[],U=[],P=0,V={},k=r.ownerDocument,A=i.documentElement||k.documentElement,M=k.body,O=-1,L=0,D=1,z=2,H="rtl"===k.dir||1===i.ort?0:100;function j(t,e){var r=k.createElement("div");return e&&u(r,e),t.appendChild(r),r}function F(t,e){var r=j(t,i.cssClasses.origin),n=j(r,i.cssClasses.handle);return j(n,i.cssClasses.touchArea),n.setAttribute("data-handle",e),i.keyboardSupport&&(n.setAttribute("tabindex","0"),n.addEventListener("keydown",function(t){return function(t,e){if(B()||X(e))return!1;var r=["Left","Right"],n=["Down","Up"],o=["PageDown","PageUp"],a=["Home","End"];i.dir&&!i.ort?r.reverse():i.ort&&!i.dir&&(n.reverse(),o.reverse());var s,l=t.key.replace("Arrow",""),u=l===o[0],c=l===o[1],p=l===n[0]||l===r[0]||u,f=l===n[1]||l===r[1]||c,d=l===a[0],h=l===a[1];if(!(p||f||d||h))return!0;if(t.preventDefault(),f||p){var m=p?0:1,g=vt(e),v=g[m];if(null===v)return!1;!1===v&&(v=E.getDefaultStep(N[e],p,10)),(c||u)&&(v*=5),v=Math.max(v,1e-7),v*=p?-1:1,s=C[e]+v}else s=h?i.spectrum.xVal[i.spectrum.xVal.length-1]:i.spectrum.xVal[0];return ft(e,E.toStepping(s),!0,!0),at("slide",e),at("update",e),at("change",e),at("set",e),!1}(t,e)})),n.setAttribute("role","slider"),n.setAttribute("aria-orientation",i.ort?"vertical":"horizontal"),0===e?u(n,i.cssClasses.handleLower):e===i.handles-1&&u(n,i.cssClasses.handleUpper),r}function R(t,e){return!!e&&j(t,i.cssClasses.connect)}function T(t,e){return!!i.tooltips[e]&&j(t.firstChild,i.cssClasses.tooltip)}function B(){return y.hasAttribute("disabled")}function X(t){return d[t].hasAttribute("disabled")}function Y(){g&&(ot("update.tooltips"),g.forEach(function(t){t&&e(t)}),g=null)}function _(){Y(),g=d.map(T),it("update.tooltips",function(t,e,r){if(g[e]){var n=t[e];!0!==i.tooltips[e]&&(n=i.tooltips[e].to(r[e])),g[e].innerHTML=n}})}function I(t,e,r){var n=k.createElement("div"),o=[];o[L]=i.cssClasses.valueNormal,o[D]=i.cssClasses.valueLarge,o[z]=i.cssClasses.valueSub;var a=[];a[L]=i.cssClasses.markerNormal,a[D]=i.cssClasses.markerLarge,a[z]=i.cssClasses.markerSub;var s=[i.cssClasses.valueHorizontal,i.cssClasses.valueVertical],l=[i.cssClasses.markerHorizontal,i.cssClasses.markerVertical];function c(t,e){var r=e===i.cssClasses.value,n=r?o:a;return e+" "+(r?s:l)[i.ort]+" "+n[t]}return u(n,i.cssClasses.pips),u(n,0===i.ort?i.cssClasses.pipsHorizontal:i.cssClasses.pipsVertical),Object.keys(t).forEach(function(o){!function(t,o,a){if((a=e?e(o,a):a)!==O){var s=j(n,!1);s.className=c(a,i.cssClasses.marker),s.style[i.style]=t+"%",a>L&&((s=j(n,!1)).className=c(a,i.cssClasses.value),s.setAttribute("data-value",o),s.style[i.style]=t+"%",s.innerHTML=r.to(o))}}(o,t[o][0],t[o][1])}),n}function W(){m&&(e(m),m=null)}function $(e){W();var r=e.mode,n=e.density||1,i=e.filter||!1,o=function(e,r,n){if("range"===e||"steps"===e)return E.xVal;if("count"===e){if(r<2)throw new Error("noUiSlider ("+t+"): 'values' (>= 2) required for mode 'count'.");var i=r-1,o=100/i;for(r=[];i--;)r[i]=i*o;r.push(100),e="positions"}return"positions"===e?r.map(function(t){return E.fromStepping(n?E.getStep(t):t)}):"values"===e?n?r.map(function(t){return E.fromStepping(E.getStep(E.toStepping(t)))}):r:void 0}(r,e.values||!1,e.stepped||!1),a=function(t,e,r){var n,i={},o=E.xVal[0],a=E.xVal[E.xVal.length-1],s=!1,l=!1,u=0;return n=r.slice().sort(function(t,e){return t-e}),(r=n.filter(function(t){return!this[t]&&(this[t]=!0)},{}))[0]!==o&&(r.unshift(o),s=!0),r[r.length-1]!==a&&(r.push(a),l=!0),r.forEach(function(n,o){var a,c,p,f,d,h,m,g,v,b,S=n,x=r[o+1],w="steps"===e;if(w&&(a=E.xNumSteps[o]),a||(a=x-S),!1!==S&&void 0!==x)for(a=Math.max(a,1e-7),c=S;c<=x;c=(c+a).toFixed(7)/1){for(g=(d=(f=E.toStepping(c))-u)/t,b=d/(v=Math.round(g)),p=1;p<=v;p+=1)i[(h=u+p*b).toFixed(5)]=[E.fromStepping(h),0];m=r.indexOf(c)>-1?D:w?z:L,!o&&s&&c!==x&&(m=0),c===x&&l||(i[f.toFixed(5)]=[c,m]),u=f}}),i}(n,r,o),s=e.format||{to:Math.round};return m=y.appendChild(I(a,i,s))}function G(){var t=f.getBoundingClientRect(),e="offset"+["Width","Height"][i.ort];return 0===i.ort?t.width||f[e]:t.height||f[e]}function J(t,e,r,n){var o=function(o){return!!(o=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),a=0===t.type.indexOf("mouse"),s=0===t.type.indexOf("pointer");0===t.type.indexOf("MSPointer")&&(s=!0);if(o){var l=function(t){return t.target===r||r.contains(t.target)||t.target.shadowRoot&&t.target.shadowRoot.contains(r)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,l);if(u.length>1)return!1;n=u[0].pageX,i=u[0].pageY}else{var c=Array.prototype.find.call(t.changedTouches,l);if(!c)return!1;n=c.pageX,i=c.pageY}}e=e||p(k),(a||s)&&(n=t.clientX+e.x,i=t.clientY+e.y);return t.pageOffset=e,t.points=[n,i],t.cursor=a||s,t}(o,n.pageOffset,n.target||e))&&(!(B()&&!n.doNotReject)&&(a=y,s=i.cssClasses.tap,!((a.classList?a.classList.contains(s):new RegExp("\\b"+s+"\\b").test(a.className))&&!n.doNotReject)&&(!(t===x.start&&void 0!==o.buttons&&o.buttons>1)&&((!n.hover||!o.buttons)&&(w||o.preventDefault(),o.calcPoint=o.points[i.ort],void r(o,n))))));var a,s},a=[];return t.split(" ").forEach(function(t){e.addEventListener(t,o,!!w&&{passive:!0}),a.push([t,o])}),a}function K(t){var e,r,n,o,s,l,u=100*(t-(e=f,r=i.ort,n=e.getBoundingClientRect(),o=e.ownerDocument,s=o.documentElement,l=p(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(l.x=0),r?n.top+l.y-s.clientTop:n.left+l.x-s.clientLeft))/G();return u=a(u),i.dir?100-u:u}function Q(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&tt(t,e)}function Z(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return tt(t,e);var r=(i.dir?-1:1)*(t.calcPoint-e.startCalcPoint);ut(r>0,100*r/e.baseSize,e.locations,e.handleNumbers)}function tt(t,e){e.handle&&(c(e.handle,i.cssClasses.active),P-=1),e.listeners.forEach(function(t){A.removeEventListener(t[0],t[1])}),0===P&&(c(y,i.cssClasses.drag),pt(),t.cursor&&(M.style.cursor="",M.removeEventListener("selectstart",n))),e.handleNumbers.forEach(function(t){at("change",t),at("set",t),at("end",t)})}function et(t,e){if(e.handleNumbers.some(X))return!1;var r;1===e.handleNumbers.length&&(r=d[e.handleNumbers[0]].children[0],P+=1,u(r,i.cssClasses.active));t.stopPropagation();var o=[],a=J(x.move,A,Z,{target:t.target,handle:r,listeners:o,startCalcPoint:t.calcPoint,baseSize:G(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:N.slice()}),s=J(x.end,A,tt,{target:t.target,handle:r,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),l=J("mouseout",A,Q,{target:t.target,handle:r,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,a.concat(s,l)),t.cursor&&(M.style.cursor=getComputedStyle(t.target).cursor,d.length>1&&u(y,i.cssClasses.drag),M.addEventListener("selectstart",n,!1)),e.handleNumbers.forEach(function(t){at("start",t)})}function rt(t){t.stopPropagation();var e=K(t.calcPoint),r=function(t){var e=100,r=!1;return d.forEach(function(n,i){if(!X(i)){var o=N[i],a=Math.abs(o-t);(a<e||a<=e&&t>o||100===a&&100===e)&&(r=i,e=a)}}),r}(e);if(!1===r)return!1;i.events.snap||o(y,i.cssClasses.tap,i.animationDuration),ft(r,e,!0,!0),pt(),at("slide",r,!0),at("update",r,!0),at("change",r,!0),at("set",r,!0),i.events.snap&&et(t,{handleNumbers:[r]})}function nt(t){var e=K(t.calcPoint),r=E.getStep(e),n=E.fromStepping(r);Object.keys(V).forEach(function(t){"hover"===t.split(".")[0]&&V[t].forEach(function(t){t.call(v,n)})})}function it(t,e){V[t]=V[t]||[],V[t].push(e),"update"===t.split(".")[0]&&d.forEach(function(t,e){at("update",e)})}function ot(t){var e=t&&t.split(".")[0],r=e&&t.substring(e.length);Object.keys(V).forEach(function(t){var n=t.split(".")[0],i=t.substring(n.length);e&&e!==n||r&&r!==i||delete V[t]})}function at(t,e,r){Object.keys(V).forEach(function(n){var o=n.split(".")[0];t===o&&V[n].forEach(function(t){t.call(v,C.map(i.format.to),e,C.slice(),r||!1,N.slice(),v)})})}function st(t,e,r,n,o,s){return d.length>1&&!i.events.unconstrained&&(n&&e>0&&(r=Math.max(r,t[e-1]+i.margin)),o&&e<d.length-1&&(r=Math.min(r,t[e+1]-i.margin))),d.length>1&&i.limit&&(n&&e>0&&(r=Math.min(r,t[e-1]+i.limit)),o&&e<d.length-1&&(r=Math.max(r,t[e+1]-i.limit))),i.padding&&(0===e&&(r=Math.max(r,i.padding[0])),e===d.length-1&&(r=Math.min(r,100-i.padding[1]))),!((r=a(r=E.getStep(r)))===t[e]&&!s)&&r}function lt(t,e){var r=i.ort;return(r?e:t)+", "+(r?t:e)}function ut(t,e,r,n){var i=r.slice(),o=[!t,t],a=[t,!t];n=n.slice(),t&&n.reverse(),n.length>1?n.forEach(function(t,r){var n=st(i,t,i[t]+e,o[r],a[r],!1);!1===n?e=0:(e=n-i[t],i[t]=n)}):o=a=[!0];var s=!1;n.forEach(function(t,n){s=ft(t,r[t]+e,o[n],a[n])||s}),s&&n.forEach(function(t){at("update",t),at("slide",t)})}function ct(t,e){return i.dir?100-t-e:t}function pt(){U.forEach(function(t){var e=N[t]>50?-1:1,r=3+(d.length+e*t);d[t].style.zIndex=r})}function ft(t,e,r,n){return!1!==(e=st(N,t,e,r,n,!1))&&(function(t,e){N[t]=e,C[t]=E.fromStepping(e);var r="translate("+lt(10*(ct(e,0)-H)+"%","0")+")";d[t].style[i.transformRule]=r,dt(t),dt(t+1)}(t,e),!0)}function dt(t){if(h[t]){var e=0,r=100;0!==t&&(e=N[t-1]),t!==h.length-1&&(r=N[t]);var n=r-e,o="translate("+lt(ct(e,n)+"%","0")+")",a="scale("+lt(n/100,"1")+")";h[t].style[i.transformRule]=o+" "+a}}function ht(t,e){return null===t||!1===t||void 0===t?N[e]:("number"==typeof t&&(t=String(t)),t=i.format.from(t),!1===(t=E.toStepping(t))||isNaN(t)?N[e]:t)}function mt(t,e){var r=s(t),n=void 0===N[0];e=void 0===e||!!e,i.animate&&!n&&o(y,i.cssClasses.tap,i.animationDuration),U.forEach(function(t){ft(t,ht(r[t],t),!0,!1)});for(var a=1===U.length?0:1;a<U.length;++a)U.forEach(function(t){ft(t,N[t],!0,!0)});pt(),U.forEach(function(t){at("update",t),null!==r[t]&&e&&at("set",t)})}function gt(){var t=C.map(i.format.to);return 1===t.length?t[0]:t}function vt(t){var e=N[t],r=E.getNearbySteps(e),n=C[t],o=r.thisStep.step,a=null;if(i.snap)return[n-r.stepBefore.startValue||null,r.stepAfter.startValue-n||null];!1!==o&&n+o>r.stepAfter.startValue&&(o=r.stepAfter.startValue-n),a=n>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&n-r.stepBefore.highestStep,100===e?o=null:0===e&&(a=null);var s=E.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(s))),null!==a&&!1!==a&&(a=Number(a.toFixed(s))),[a,o]}return u(b=y,i.cssClasses.target),0===i.dir?u(b,i.cssClasses.ltr):u(b,i.cssClasses.rtl),0===i.ort?u(b,i.cssClasses.horizontal):u(b,i.cssClasses.vertical),u(b,"rtl"===getComputedStyle(b).direction?i.cssClasses.textDirectionRtl:i.cssClasses.textDirectionLtr),f=j(b,i.cssClasses.base),function(t,e){var r=j(e,i.cssClasses.connects);d=[],(h=[]).push(R(r,t[0]));for(var n=0;n<i.handles;n++)d.push(F(e,n)),U[n]=n,h.push(R(r,t[n+1]))}(i.connect,f),(S=i.events).fixed||d.forEach(function(t,e){J(x.start,t.children[0],et,{handleNumbers:[e]})}),S.tap&&J(x.start,f,rt,{}),S.hover&&J(x.move,f,nt,{hover:!0}),S.drag&&h.forEach(function(t,e){if(!1!==t&&0!==e&&e!==h.length-1){var r=d[e-1],n=d[e],o=[t];u(t,i.cssClasses.draggable),S.fixed&&(o.push(r.children[0]),o.push(n.children[0])),o.forEach(function(t){J(x.start,t,et,{handles:[r,n],handleNumbers:[e-1,e]})})}}),mt(i.start),i.pips&&$(i.pips),i.tooltips&&_(),it("update",function(t,e,r,n,o){U.forEach(function(t){var e=d[t],n=st(N,t,0,!0,!0,!0),a=st(N,t,100,!0,!0,!0),s=o[t],l=i.ariaFormat.to(r[t]);n=E.fromStepping(n).toFixed(1),a=E.fromStepping(a).toFixed(1),s=E.fromStepping(s).toFixed(1),e.children[0].setAttribute("aria-valuemin",n),e.children[0].setAttribute("aria-valuemax",a),e.children[0].setAttribute("aria-valuenow",s),e.children[0].setAttribute("aria-valuetext",l)})}),v={destroy:function(){for(var t in i.cssClasses)i.cssClasses.hasOwnProperty(t)&&c(y,i.cssClasses[t]);for(;y.firstChild;)y.removeChild(y.firstChild);delete y.noUiSlider},steps:function(){return U.map(vt)},on:it,off:ot,get:gt,set:mt,setHandle:function(e,r,n){if(!((e=Number(e))>=0&&e<U.length))throw new Error("noUiSlider ("+t+"): invalid handle number, got: "+e);ft(e,ht(r,e),!0,!0),at("update",e),n&&at("set",e)},reset:function(t){mt(i.start,t)},__moveHandles:function(t,e,r){ut(t,e,N,r)},options:l,updateOptions:function(t,e){var r=gt(),n=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];n.forEach(function(e){void 0!==t[e]&&(l[e]=t[e])});var o=q(l);n.forEach(function(e){void 0!==t[e]&&(i[e]=o[e])}),E=o.spectrum,i.margin=o.margin,i.limit=o.limit,i.padding=o.padding,i.pips?$(i.pips):W(),i.tooltips?_():Y(),N=[],mt(t.start||r,e)},target:y,removePips:W,removeTooltips:Y,pips:$}}return{__spectrum:S,version:t,create:function(e,r){if(!e||!e.nodeName)throw new Error("noUiSlider ("+t+"): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider ("+t+"): Slider was already initialized.");var n=X(e,q(r),r);return e.noUiSlider=n,n}}});
},{}],"ohSA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=r(require("nouislider")),e=a(require("./rank"));function a(t){return t&&t.__esModule?t:{default:t}}function n(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return n=function(){return t},t}function r(t){if(t&&t.__esModule)return t;var e=n();if(e&&e.has(t))return e.get(t);var a={};if(null!=t){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)){var i=r?Object.getOwnPropertyDescriptor(t,c):null;i&&(i.get||i.set)?Object.defineProperty(a,c,i):a[c]=t[c]}}return a.default=t,e&&e.set(t,a),a}function c(t,e){return s(t)||l(t,e)||i()}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var a=[],n=!0,r=!1,c=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!e||a.length!==e);n=!0);}catch(s){r=!0,c=s}finally{try{n||null==l.return||l.return()}finally{if(r)throw c}}return a}}function s(t){if(Array.isArray(t))return t}var o=!0,d=!1,u=d3.select("body"),p=d3.select(".graphic__explore"),f=d3.select(".explore__chart"),y=f.select("svg"),g=["#dbcdbd","#e8b8a0","#f2a385","#f88d69","#fc764f","#fe5c34","#ff3814"].reverse(),x=20,b=12,m=160,v=0,h=0,_=0,w=0,q=0,k=null,A=null,M=null,O=null,j={quality:80,quantity:20},D={quality:d3.scaleLinear(),quantity:d3.scaleLinear(),rank:d3.scaleLinear(),fill:d3.scaleQuantile()},L=d3.voronoi();function N(t){var e=document.createElementNS("http://www.w3.org/2000/svg","g");e.setAttributeNS(null,"transform",t);var a=e.transform.baseVal.consolidate().matrix;return[a.e,a.f]}function P(t){var e=t.breweryNames,a=t.rank,n=y.select(".table__brews"),r=n.selectAll(".brew").data(e);r.exit().remove();var c=r.enter().append("g").attr("class","brew");c.append("text").style("font-size",b);var i=c.merge(r);i.attr("transform",function(t,e){return"translate(0, ".concat((e+1)*b*1.5,")")}),i.select("text").text(function(t){return t});var l=a*b*1.5;n.classed("is-visible",o),n.transition().ease(d3.easeLinear).duration(100).attr("transform","translate(".concat(m+.5*b,", ").concat(l,")"))}function S(t){var e=t.breweryNames,a=t.rank,n=t.index;y.selectAll(".row").classed("is-connected",!1).transition().duration(100).attr("transform",function(t){return"translate(0, ".concat(t.rank*b*1.5,")")});var r=y.select(".row-".concat(n)),c=y.select(".table__brews");if(r.empty())c.classed("is-visible",!1);else{var i=-b;r.classed("is-connected",!0).transition().attr("transform",function(t){return"translate(".concat(i,", ").concat(t.rank*b*1.5,")")}),P({breweryNames:e,rank:a})}}function z(t){var e=t.index,a=y.select(".row-".concat(e)),n=y.select(".table__brews");a.classed("is-connected",!1).transition().attr("transform",function(t){return"translate(0, ".concat(t.rank*b*1.5,")")}),n.classed("is-visible",!1)}function B(t){var e=y.select(".g-cities-plot"),a=e.select(".city-".concat(t.index));e.selectAll(".city").classed("is-faded",!0).classed("is-active",!1),a.classed("is-active",!0).raise();var n=y.select(".g-tooltip");n.selectAll(".tooltip__text").text("".concat(t.city,", ").concat(t.stateAbbr)),n.selectAll(".tooltip__quality").text("rating: ".concat(t.grade)),n.selectAll(".tooltip__quantity").text("breweries: ".concat(t.count));var r=D.quantity(t.count),c=D.quality(t.score),i=(D.rank(t.rank),"translate(".concat(r,", ").concat(c,")")),l="rotate(".concat(D.angle,")");n.attr("transform","".concat(i," ").concat(l)).classed("is-visible",!0)}function C(t){var e=y.select(".g-cities-plot"),a=e.select(".city-".concat(t.index));e.selectAll(".city").classed("is-faded",!1);var n=y.select(".g-tooltip");a.classed("is-active",!1),n.classed("is-visible",!1)}function Q(){var t=d3.select(this),e="Table"===t.text();d3.select(this.parentNode).selectAll("li").classed("is-selected",!1),t.classed("is-selected",!0),y.select(".g-table").classed("is-hidden",!e),y.select(".table__title").classed("is-hidden",!e),y.select(".g-cities").classed("is-hidden",e),y.select(".target").classed("is-hidden",e)}function T(){var t=y.select(".g-cities"),e=t.select(".g-cities-plot").selectAll(".city").data(O,function(t){return t.index}),a=e.enter().append("g").attr("class",function(t){return"city city-".concat(t.index)});a.append("circle").attr("cx",0).attr("cy",0).attr("r",0),e.exit().remove(),(e=a.merge(e)).select("circle").attr("r",function(t){return D.rank(t.rank)}).style("fill",function(t){return D.fill(t.rank)}).style("stroke",function(t){return d3.color(D.fill(t.rank)).darker(.6)});var n=y.select(".g-table"),r=n.select(".table__rows"),i=y.select(".table__title"),l=r.selectAll(".row").data(O.slice(0,q),function(t){return t.index});l.each(function(t){return t.newbie=!1});var s=l.enter().append("g").attr("class",function(t){return"row row-".concat(t.index)}).attr("transform","translate(0, ".concat(h,")")).each(function(t){return t.newbie=!0});s.append("text").style("font-size",b),s.append("rect").attr("x",0).attr("y",1.25*-b).attr("height",1.5*b).on("mouseenter",function(t){o&&(S(t),B(t))}).on("mouseout",function(t){z(t),C(t)}),l.exit().transition().style("opacity",0).attr("transform","translate(".concat(v/4,", ").concat(h/2,")")).remove(),l=s.merge(l);var d=o?.5*v-w-3*x:.5*v-w/2,u=o?.5*v+2*x:0,p=D.quality.range()[0],f=w-p+3*x,g="translate(".concat(d+w/2,", ").concat(f,")"),m="rotate(".concat(-D.angle," 0 ").concat(p,")"),_="".concat(g," ").concat(m);t.attr("transform",_),y.select(".target").attr("transform","translate(".concat(d+w/2,",").concat(3*x,")")),e.attr("transform",function(t){var e=D.quantity(t.count),a=D.quality(t.score);return"translate(".concat(e,", ").concat(a,")")}),t.select(".axis--x line").attr("x1",0).attr("y1",0).attr("x2",D.quantity.range()[1]/1).attr("y2",0),t.select(".axis--y line").attr("x1",0).attr("y1",0).attr("x2",-D.quality.range()[0]/1).attr("y2",0),t.select(".axis--y").attr("transform","translate(".concat(-x,",").concat(p,") rotate(90)")),t.select(".axis--x").attr("transform","translate(0,".concat(p+x,")")),n.attr("transform","translate(".concat(u,", ").concat(3*x,")")),i.attr("transform","translate(".concat(u,", ").concat(3*x,")"));d3.transition().duration(200).ease(d3.easeLinear);l.transition().duration(function(t,e,a){var n=c(N(d3.select(a[e]).attr("transform")),2),r=(n[0],n[1]),i=Math.min(t.rank*b*1.5,1e3);return i<b?20:100+2*(r-i)}).delay(function(t){return 30*t.rank}).ease(d3.easeLinear).attr("transform",function(t){return"translate(0, ".concat(t.rank*b*1.5,")")}).style("opacity",1),l.select("text").text(function(t){return"".concat(d3.format("0>2")(t.rank+1),". ").concat(t.city,", ").concat(t.stateAbbr)}).style("fill",function(t){return D.fill(t.rank)}).each(function(){var t=this.getBoundingClientRect().width;d3.select(this.parentNode).select("rect").attr("width",t)});var k=y.select(".g-voronoi").selectAll("path").data(L.polygons(O)),A=k.enter().append("path");k.merge(A).attr("d",function(t){return t?"M".concat(t.join("L"),"Z"):null}).on("mouseenter",function(t){B(t.data),o&&S(t.data)}).on("mouseout",function(t){C(t.data),o&&z(t.data)})}function W(){var t=p.select(".explore__filter").node().getBoundingClientRect().height;_=Math.floor(window.innerHeight-1.5*t),v=f.node().offsetWidth-2*x,h=o?_-2*x:_+.5*t,o=u.classed("is-full")}function E(){W(),d&&(y.attr("width",v+2*x).attr("height",h+2*x),y.select(".g-graphic").attr("transform","translate(".concat(x,", ").concat(x,")")),q=5*Math.floor((h/(1.5*b)-5)/5),R(),T(),o?y.selectAll(".is-hidden").classed("is-hidden",!1):(y.select(".g-table").classed("is-hidden",!0),y.select(".table__title").classed("is-hidden",!0),y.select(".g-cities").classed("is-hidden",!1),y.select(".target").classed("is-hidden",!1),p.selectAll(".explore__toggle li").classed("is-selected",function(t,e){return 0===e})))}function I(t){var e=t.x,a=t.y,n=e*e,r=a*a;return Math.sqrt(n+r)}function R(){var t=I({x:j.quantity,y:j.quality}),e=o?5:0,a=o?2:1.2;w=Math.min(v/a,h)-x*e;var n=j.quantity/t*w,r=j.quality/t*w;D.quality.domain(d3.extent(O,function(t){return t.score})).range([r,0]),D.quantity.domain(d3.extent(O,function(t){return t.count})).range([0,n]),D.rank.domain(d3.extent(O,function(t){return t.rank})).range([16,2]),D.fill.domain(O.map(function(t){return t.rank})).range(g);var c=Math.acos(j.quantity/t);D.angle=90-180*c/Math.PI,L.x(function(t){return D.quantity(t.count)}).y(function(t){return D.quality(t.score)}).extent([[-x,-x],[n+x,r+x]])}function H(){var t=y.append("g").attr("class","g-graphic");t.append("line").attr("class","connector");var e=t.append("g").attr("class","target"),a=t.append("g").attr("class","g-cities");a.append("g").attr("class","g-cities-plot"),t.append("text").attr("class","table__title").attr("alignment-baseline","baseline").attr("y",1.75*-b).text("Best cities");var n=t.append("g").attr("class","g-table"),r=a.append("g").attr("class","cities-axis"),c=a.append("g").attr("class","g-tooltip");c.append("text").attr("class","tooltip__text shadow").attr("text-anchor","middle").attr("alignment-baseline","middle"),c.append("text").attr("class","tooltip__text").attr("text-anchor","middle").attr("alignment-baseline","middle"),c.append("text").attr("class","tooltip__quality shadow").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("y",1.2*b),c.append("text").attr("class","tooltip__quality").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("y",1.2*b),c.append("text").attr("class","tooltip__quantity shadow").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("y",2.4*b),c.append("text").attr("class","tooltip__quantity").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("y",2.4*b),a.append("g").attr("class","g-voronoi"),e.append("circle").attr("cx",0).attr("cy",0).attr("r",3);var i=e.append("text");i.append("tspan").attr("text-anchor","middle").attr("x",0).attr("y",2.75*-b).text("Closer to here"),i.append("tspan").attr("text-anchor","middle").attr("x",0).attr("y",1.5*-b).text("the better");var l=r.append("g").attr("class","axis--x");l.append("text").html("Quantity &rarr;").attr("text-anchor","start").attr("alignment-baseline","hanging").attr("y",b/2),l.append("line");var s=r.append("g").attr("class","axis--y");s.append("text").html("&larr; Quality").attr("text-anchor","end").attr("alignment-baseline","hanging").attr("y",b/2),s.append("line");var o=n.append("g").attr("class","table__brews");n.append("g").attr("class","table__rows"),o.append("text").style("font-size",b).attr("class","brews__label").text("Top breweries"),o.append("line").attr("x1",-m).attr("y1",.25*b).attr("x2",.5*-b).attr("y2",.25*b),o.append("line").attr("x1",.5*-b).attr("y1",1.25*-b).attr("x2",.5*-b).attr("y2",.25*b),o.append("line").attr("x1",.5*-b).attr("y1",1.25*-b).attr("x2",.67*m).attr("y2",1.25*-b)}function U(){var a=p.select(".explore__slider");t.create(a.node(),{start:20,connect:[!0,!1],step:1,range:{min:0,max:100}}),a.node().noUiSlider.on("update",function(){j.quantity=+this.get(),j.quality=100-j.quantity,O=e.default.weight({data:M,balance:j}).slice(0,100),p.select(".result__quality").text("".concat(j.quality,"%")),p.select(".result__quantity").text("".concat(j.quantity,"%")),R(),T(),o&&z({index:O[0].index}),C(M[0])})}function V(){var t=p.selectAll("select");t.on("change",function(){var a={};t.each(function(){var t=d3.select(this).attr("data-col"),e=this.value;a[t]=e});var n=a.nearby,r=a.dist,c=a.abv;M=e.default.init({cityData:A,breweryData:k,nearby:n,dist:r,abv:c}),O=e.default.weight({data:M,balance:j}).slice(0,100),R(),T()})}function Z(){p.selectAll(".explore__toggle li").on("click",Q)}function F(){o&&S(O[0]),B(O[0])}function G(){W(),H(),U(),V(),Z(),d=!0,E(),R(),T(),F()}function J(t){k=t.breweryData,A=t.cityData,M=e.default.init({cityData:A,breweryData:k,max:50}),O=e.default.weight({data:M,balance:j}),G()}var K={init:J,resize:E};exports.default=K;
},{"nouislider":"p3wi","./rank":"Xrkb"}],"bpAR":[function(require,module,exports) {
"use strict";function t(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,n)}return a}function e(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(r,!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function a(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n=d3.select("body"),r=d3.select(".graphic__trend"),o=d3.select(".trend__chart--all"),c=d3.select(".trend__chart--state"),s=!0,i=!1,u=1997,l=2017,d=1e5,f=["#e8b8a0","#f2a385","#f88d69","#fc764f","#fe5c34","#ff3814"],p={x:d3.scaleLinear(),y:d3.scaleLinear(),color:d3.scaleQuantize()},v={x:d3.scaleLinear(),y:d3.scaleLinear()},y=20,m=12,g=1.5,x=0,h=0,_=0,b=0,k=null,O=null,w=0,j=null;function P(t,e){return+e.find(function(e){return e.state.toLowerCase()===t.toLowerCase()}).population}function L(t){var e=d3.range(u,l),a=t[0].population;return e.map(function(e){var n=t.find(function(t){return t.year===e});return n||{key:e.toString(),value:0,year:e,population:a}})}function D(t){var a=t.population,n=t.established;k=n.map(function(t,n){return e({},t,{population:P(t.key,a),values:t.values.map(function(n){return e({},n,{year:+n.key,population:P(t.key,a)})}).filter(function(t){return t.year>=u&&t.year<l})})}).map(function(t){return e({},t,{values:L(t.values),max:d3.max(t.values,function(t){return t.value/t.population})*d,mean:d3.mean(t.values,function(t){return t.value/t.population})*d})}).filter(function(t){return"Washington DC"!==t.key}).sort(function(t,e){return d3.descending(t.mean,e.mean)}),w=d3.max(k,function(t){return t.max}),j=d3.extent(k,function(t){return t.mean});var r=d3.merge(n.map(function(t){return t.values}));O=d3.nest().key(function(t){return t.key}).sortKeys(d3.ascending).rollup(function(t){return d3.sum(t,function(t){return t.value})}).entries(r).map(function(t){return e({},t,{year:+t.key})}).filter(function(t){return t.year>=u&&t.year<l})}function M(){return new Promise(function(t,e){d3.queue().defer(d3.csv,"assets/population.csv").defer(d3.json,"assets/established.json").await(function(a,n,r){a?e(a):(D({population:n,established:r}),t())})})}function S(){x=c.select(".state__svg").node().offsetWidth,h=Math.floor(x/g);var t=x-2*y,e=(h=100)-2*y;p.y.range([e,0]),p.x.range([0,t]);var a=d3.area().x(function(t){return p.x(t.year)}).y0(function(t){return p.y(t.value/t.population*d)}).y1(p.y(0)).curve(d3.curveMonotoneX),n=d3.area().x(function(t){return p.x(t.year)}).y(function(t){return p.y(t.value/t.population*d)}).curve(d3.curveMonotoneX),r=c.selectAll("svg");r.attr("width",x).attr("height",h),r.select(".state__area").datum(function(t){return t.values}).attr("d",a),r.select(".state__line").datum(function(t){return t.values}).attr("d",n);var o=d3.axisBottom(p.x).tickFormat(d3.format(" ")).tickValues([1997,2016]);r.select(".axis--x").call(o).attr("transform","translate(0, ".concat(e,")"));var s=d3.axisRight(p.y).tickSizeInner(-t).tickPadding(.25*m).tickValues([.4,1]);r.select(".axis--y").call(s).attr("transform","translate(".concat(t,", 0)"))}function z(){var t=d3.line().x(function(t){return v.x(t.year)}).y(function(t){return v.y(t.value)}).curve(d3.curveMonotoneX);_=o.node().offsetWidth,b=window.innerHeight*(s?.8:.5);var e=_-4*y,a=b-2*y;v.y.range([a,0]),v.x.range([0,e]);var n=o.selectAll("svg");n.attr("width",_).attr("height",b),n.select(".all__path").datum(O).attr("d",t);var r=d3.axisBottom(v.x).tickFormat(d3.format(" "));n.select(".axis--x").call(r).attr("transform","translate(0, ".concat(a,")"));var c=d3.axisRight(v.y).tickSizeInner(-e).tickPadding(.5*m);n.select(".axis--y").call(c).attr("transform","translate(".concat(e,", 0)")),n.select(".y-label").attr("transform","rotate(90)").attr("x",a/2).attr("y",1.5*-y-m)}function A(){s=n.classed("is-full"),i&&(S(),z())}function B(){var t=o.append("svg"),e=t.append("g").attr("class","g-axis").attr("transform","translate(".concat(y,", ").concat(y,")")),a=t.append("g").attr("class","g-graphic").attr("transform","translate(".concat(y,", ").concat(y,")"));e.append("g").attr("class","axis--x"),e.append("g").attr("class","axis--y").append("text").attr("class","y-label").attr("text-anchor","middle").text("# of Breweries opened"),a.append("path").attr("class","all__path")}function C(){var t=c.selectAll(".chart__state").data(k).enter().append("div").attr("class","chart__state");t.append("p").attr("class","state__label").text(function(t){return t.key});var e=t.append("div").attr("class","state__svg").append("svg"),a=e.append("g").attr("class","g-axis").attr("transform","translate(".concat(y,", ").concat(y,")")),n=e.append("g").attr("class","g-graphic").attr("transform","translate(".concat(y,", ").concat(y,")"));a.append("g").attr("class","axis--x"),a.append("g").attr("class","axis--y"),n.append("path").attr("class","state__area").style("fill",function(t){return p.color(t.mean)}),n.append("path").attr("class","state__line").attr("transform","translate(0, -1)")}function W(){p.x.domain([u,l-1]),p.y.domain([0,w]),p.color.domain(j).range(f),v.x.domain([u,l-1]);var t=d3.max(O,function(t){return t.value});v.y.domain([0,t]).nice()}function X(){W(),B(),C(),i=!0,A()}function E(){M().then(X).catch(function(t){return console.log(t)})}var F={init:E,resize:A};exports.default=F;
},{}],"TAPd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=n(require("./utils/locate")),t=n(require("./load-data")),r=n(require("./graphic-capital")),a=n(require("./graphic-explore")),i=n(require("./graphic-trend"));function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return u(e)||c(e)||l()}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function c(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function u(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var d=d3.select("body"),f={location:!1,loaded:!1};function s(){r.default.resize(),a.default.resize(),i.default.resize()}function h(){f.location&&f.loaded&&(r.default.setupScroll(f.location),i.default.init())}function p(){if(d.classed("is-mobile")){var e=window.innerHeight;d.select("main").style("height","".concat(Math.floor(1.05*e),"px")),d.select(".intro").style("height","".concat(e,"px"))}}function y(){p(),(0,e.default)().then(function(e){var t=e||{};f.location=!0,r.default.hed(t),h()}).catch(function(e){console.log(e)}),t.default.init().then(function(e){f.loaded=!0;var t=o(e),i=t[0],n=t[1],l=t[2];r.default.init({usaData:i,breweryData:n,cityData:l}),a.default.init({breweryData:n,cityData:l}),h()}).catch(function(e){return console.log(e)})}var g={init:y,resize:s};exports.default=g;
},{"./utils/locate":"NSOq","./load-data":"xZJw","./graphic-capital":"y9tF","./graphic-explore":"ohSA","./graphic-trend":"bpAR"}],"v9Q8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=[{image:"2018_02_stand-up",url:"2018/02/stand-up",hed:"The Structure of Stand-Up Comedy"},{image:"2018_04_birthday-paradox",url:"2018/04/birthday-paradox",hed:"The Birthday Paradox Experiment"},{image:"2018_11_boy-bands",url:"2018/11/boy-bands",hed:"Internet Boy Band Database"},{image:"2018_08_pockets",url:"2018/08/pockets",hed:"Womenâ€™s Pockets are Inferior"}],t=null;function n(e,t){var n=document.getElementsByTagName("script")[0],o=document.createElement("script");return o.src=e,o.async=!0,n.parentNode.insertBefore(o,n),t&&"function"==typeof t&&(o.onload=t),o}function o(t){var n=new XMLHttpRequest,o=Date.now(),r="https://pudding.cool/assets/data/stories.json?v=".concat(o);n.open("GET",r,!0),n.onload=function(){if(n.status>=200&&n.status<400){var o=JSON.parse(n.responseText);t(o)}else t(e)},n.onerror=function(){return t(e)},n.send()}function r(e){return"\n\t<a class='footer-recirc__article' href='https://pudding.cool/".concat(e.url,"' target='_blank' rel='noopener'>\n\t\t<img class='article__img' src='https://pudding.cool/common/assets/thumbnails/640/").concat(e.image,".jpg' alt='").concat(e.hed,"'>\n\t\t<p class='article__headline'>").concat(e.hed,"</p>\n\t</a>\n\t")}function a(){var e=window.location.href,n=t.filter(function(t){return!e.includes(t.url)}).slice(0,4).map(r).join("");d3.select(".pudding-footer .footer-recirc__articles").html(n)}function s(){o(function(e){t=e,a()})}var c={init:s};exports.default=c;
},{}],"epB2":[function(require,module,exports) {
"use strict";var e=a(require("lodash.debounce")),i=a(require("./utils/is-mobile")),s=a(require("./utils/link-fix")),t=a(require("./graphic")),l=a(require("./footer"));function a(e){return e&&e.__esModule?e:{default:e}}var d=d3.select("body"),r=0;function n(){var e=window.matchMedia("(min-width: 800px)").matches;d.classed("is-full",e)}function u(){var e=d.node().offsetWidth;r!==e&&(r=e,t.default.resize(),n())}function c(){if(d.select("header").classed("is-sticky")){var e=d.select(".header__menu"),i=d.select(".header__toggle");i.on("click",function(){var s=e.classed("is-visible");e.classed("is-visible",!s),i.classed("is-visible",!s)})}}function o(){(0,s.default)(),d.classed("is-mobile",i.default.any()),n(),window.addEventListener("resize",(0,e.default)(u,150)),c(),t.default.init(),l.default.init()}o();
},{"lodash.debounce":"or4r","./utils/is-mobile":"WEtf","./utils/link-fix":"U9xJ","./graphic":"TAPd","./footer":"v9Q8"}]},{},["epB2"], null)